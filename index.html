<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="小笨熊的旅途">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="小笨熊的旅途">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小笨熊的旅途">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>小笨熊的旅途</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小笨熊的旅途</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/01/DOM事件全整理之从DOM事件级别,DOM事件流到事件委托/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hitobear">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小笨熊的旅途">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/01/DOM事件全整理之从DOM事件级别,DOM事件流到事件委托/" itemprop="url">DOM事件全整理之从DOM事件级别,DOM事件流到事件委托</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-01T16:05:55+08:00">
                2018-04-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;JS编程中常常接触到DOM事件，虽然只是事件而已，但是处于历史原因，它是足够复杂的，也足够强大的，由于自己之前总是对DOM事件的一些概念模糊不清，所以这里来做一下总结啦</p>
<h2 id="DOM级别与DOM事件"><a href="#DOM级别与DOM事件" class="headerlink" title="DOM级别与DOM事件"></a>DOM级别与DOM事件</h2><p>&emsp;&emsp;我们常听到DOM0级事件，DOM1级事件，DOM2级事件处理，其实这里的DOM0，DOM1，DOM2和DOM级别是密切相关的。</p>
<p>&emsp;&emsp;最开始的时候，IE4和Netscape等浏览器各自实现自己的一套DOM api，没有一个统一的标准，对于开发者和用户来说是一件头疼的事，于是，1998年，W3C综合了各家的现有API,制定了DOM1级(DOM Level 1)标准。DOM1级比较简洁，由两个模块组成：DOM核心（DOM Core）和DOM HTML，其中各个事件相关的信息作为方法包含在在DOM元素中进行说明的，详细可以了解W3C的相关<a href="https://www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-html.html" target="_blank" rel="noopener">章节</a>.</p>
<p>&emsp;&emsp;DOM2级的目标要宽泛很多，引入了多个新模块，其中包括DOM Events，即在DOM2的时候，单独把事件作为一个模块，并针对DOM1级事件部分作了很大的升级，不再只是简单的告诉我们有哪些事件可以用，而是使事件的标准更加详细，如新增了事件流，事件捕获，事件冒泡，事件取消等机制和规范。</p>
<p>&emsp;&emsp;DOM Level 3并没有对事件做任何修订(可能是因为认为DOM Events已经足够成熟了吧),所以我们知道现在用的还是DOM Level 2的事件标准。</p>
<p>&emsp;&emsp;到这里可以做一下总结，DOM API 是有DOM1级，DOM2级，DOM3级三个标准的，与之对应的每一个标准中DOM事件相关的部分我们叫做DOM1级事件处理，DOM2级事件处理(刚才也说了，DOM3级事件处理不存在)，那么标准是从DOM Level 1开始的，我们说的DOM0又是什么呢？可以说这只是公认的一种说法，即在又事实标准之前的事件处理，我们叫做DOM0级事件处理。</p>
<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>&emsp;&emsp;因为DOM1只是对之前各大厂商的DOM api做了以下整理而实施的标准，所以通常我们认为DOM1的事件处理和DOM0的事件处理是一样的。</p>
<h2 id="事件处理程序"><a href="#事件处理程序" class="headerlink" title="事件处理程序"></a>事件处理程序</h2><p>&emsp;&emsp;事件处理程序就是响应某个事件的函数，DOM中的事件处理程序有多种方式，大概可以分为以下五种类型。</p>
<ol>
<li>HTML事件处理程序 </li>
<li>DOM0级事件处理程序</li>
<li>DOM2级事件处理程序</li>
</ol>
<h3 id="HTML事件处理程序"><a href="#HTML事件处理程序" class="headerlink" title="HTML事件处理程序"></a>HTML事件处理程序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onclick=&quot;alert(hello world!)&quot;&gt;&lt;/hello&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;像上述代码这样，直接将事件函数写到HTML中元素的属性上，就是HTML事件处理程序，这里双引号中的部分是事件触发后<strong>要执行的代码，它实际上是由JS引擎由<code>eval()</code>调用的</strong>，所以它是全局作用域。</p>
<p>&emsp;&emsp;这样的事件处理有一个明显的缺点，即当JS代码太复杂时，将大段JS代码卸载HTML中显然不合适，于是有了下面这种写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onclick=&quot;doSomething()&quot;&gt;&lt;/hello&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;这样虽然解决了嵌套代码过长的问题，但又引来了另一个问题，即时差问题—,如果用户在界面刚出现就进行点击，而JS还没有加载好的话，就会报错。</p>
<p>&emsp;&emsp;此外，很重要的一点是，这种写法，一个函数的改变，可能同时需要js和html的改变，严重违背了轻耦合的原则，综上，我们有了DOM0级事件处理。</p>
<h2 id="DOM0级事件处理"><a href="#DOM0级事件处理" class="headerlink" title="DOM0级事件处理"></a>DOM0级事件处理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">var btn=document.getElementById(&quot;#btn&quot;);</span><br><span class="line">btn.onclick=function()&#123;</span><br><span class="line">    alert(hello world!)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;可以看到，这种方式中可以把事件处理相关部门都放到js中，并且这里的事件处理程序是作为btn对象的方法的，是局部作用域。</p>
<p>&emsp;&emsp;但是现在，我依然面临着问题，如果有对这个元素的单击事件添加两个处理函数，这个就无法帮我实现了，而且即使不需要添加多个处理函数，我也不太敢轻易的添加事件，除非我非常确定，别人写代码时不会涉及到这部分(因为一不小心可能会覆盖他人之前对这个元素的该事件添加的处理函数)。</p>
<h2 id="DOM2级事件处理程序-不支持IE"><a href="#DOM2级事件处理程序-不支持IE" class="headerlink" title="DOM2级事件处理程序(不支持IE)"></a>DOM2级事件处理程序(不支持IE)</h2><p>&emsp;&emsp;进一步规范后，有了DOM2级事件处理程序，我们可以通过类似如下代码，对一个元素的同一个事件添加多个处理程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var btn=document.getElementById(&quot;#btn&quot;);</span><br><span class="line">btn.addEventListener(&quot;click&quot;,function()&#123;</span><br><span class="line">    alert(hello world!)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">btn.addEventListener(&quot;click&quot;,function()&#123;</span><br><span class="line">    alert(hello world2!)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;通过DOM2级的<code>addEventListener</code>方法我们可以实现绑定多个事件处理程序，但要注意的是同样的事件和事件流机制下相同的方法只会触发一次，即相同的方法会发生覆盖。<br>等等，这里的事件流又是什么呢？</p>
<h3 id="事件流机制"><a href="#事件流机制" class="headerlink" title="事件流机制"></a>事件流机制</h3><p><img src="http://p4a8bakov.bkt.clouddn.com/event1.png"><br>&emsp;&emsp;我们已经知道，一个元素绑定了特定事件之后，在事件发生的同时，函数就会被调用，但请看上图这种请看，爷爷，父亲和儿子这三个div元素都同时绑定了各自单击事件<code>funcgrand(),funcparent(),funcchild()</code>，那么当我在儿子上单击时，哪个函数会被触发呢？</p>
<p>&emsp;&emsp;首先来分析一下，如果说直观感受是在儿子元素上发生的单击事件，所以应该触发<code>funcchild()</code>,但细细想来这样是不妥的，因为儿子元素本身就是父亲元素甚至爷爷元素的一部分，所以说是不是相当于也在父亲和爷爷元素上发生了单击事件呢？答案是是的，这种情况下三个元素绑定的对应事件的函数都会被浏览器触发，那么问题又来啦，既然三个函数都会被触发，那么它们应该以什么顺序被触发呢，是自上到下呢，还是自下到上呢？</p>
<p>&emsp;&emsp;这个问题也就是我们常说的事件流了，即元素从页面中接收事件的顺序，也即事件在页面中的传播顺序。</p>
<p>&emsp;&emsp;W3C对这个问题给了我们一个答案，就是都可以，既可以自上而下依次触发，又可以自下而上触发，具体顺序由我们自己而定(之所以支持这两种方式，是为了与之前浏览器的实现兼容，因为早期IE事件传播方向为从上至下，而Netscape 则从下至上)。</p>
<h3 id="事件捕获和事件冒泡"><a href="#事件捕获和事件冒泡" class="headerlink" title="事件捕获和事件冒泡"></a>事件捕获和事件冒泡</h3><p>&emsp;&emsp;实际上，之前我们提到的<code>addEventListener</code>还有第三个参数，可以为<code>true</code>或<code>false</code>.当第三个参数为<code>true</code>时，绑定的是捕获阶段的事件，在捕获阶段，事件是由上到下依次触发的，反之当第三个参数为<code>false</code>时，绑定的是冒泡阶段的事件，在冒泡阶段，事件是由下到上触发的。</p>
<p>&emsp;&emsp;W3C规定，当事件发生时，最先通知window,然后是document,由上到下依次进入知道最底层的被触发的那个元素(也就是目标元素，通常的<code>event.target</code>的值)为止，这个过程就是捕获。<br>&emsp;&emsp;之后，事件会从目标元素开始，冒泡，由下至上逐层传递至window,这个过程就是冒泡。</p>
<p>&emsp;&emsp;所以,捕获是会比冒泡先执行的</p>
<h3 id="Tips-1"><a href="#Tips-1" class="headerlink" title="Tips"></a>Tips</h3><p>&emsp;&emsp;正如事件捕获和事件冒泡提到的，事件程序可能会在两个阶段中被执行，即捕获中和冒泡中，当一个事件添加了两个处理函数，一个指定了参数<code>true</code>,一个指定的参数<code>false</code>,则它们都会被执行，且参数为<code>true</code>的那个先执行，因为是捕获阶段先发生.</p>
<p>&emsp;&emsp;但是有一个例外，即如果事件函数被添加在了目标元素本身上，如之前的例题中的儿子元素上被绑定了两个单击事件函数，一个第三个参数是<code>true</code>,一个第三个参数是<code>false</code>，则它们的实际执行顺序是不受第三个参数控制的，而只是单纯的和添加事件的顺序有关(先<code>addEventListener</code>的先执行),这个可能是和处于目标阶段有关(目标阶段和捕获阶段和冒泡阶并称为三大阶段，所以说目标阶段中要把捕获和冒泡的思想排除？真正的顺序是捕获—&gt;目标阶段-&gt;冒泡吧?)？</p>
<h2 id="IE事件处理程序"><a href="#IE事件处理程序" class="headerlink" title="IE事件处理程序"></a>IE事件处理程序</h2><p>&emsp;&emsp;对于IE来说，在IE9之前，必须使用<code>attachEvent</code>而不是标准方法<code>addEventListener</code>,IE事件处理程序中有类似于DOM2级事件处理程序的2个方法<code>attachEvent</code>和<code>detachEvent</code></p>
<p>&emsp;&emsp;它们都接收两个参数:</p>
<ol>
<li><p>事件处理程序名称,如 <code>onclick</code>,<code>onmounseover</code>,注意,这里是事件处理程序名称，而不是事件名称，要有前缀<code>on</code> </p>
</li>
<li><p>事件处理程序函数</p>
</li>
<li><p>不像DOM2级事件处理程序一样，它们不接收第三个参数，因为IE8及更早版本只支持冒泡事件流(没有捕获阶段)</p>
</li>
</ol>
<h3 id="Tips-2"><a href="#Tips-2" class="headerlink" title="Tips"></a>Tips</h3><p>&emsp;&emsp;在IE8中，事件执行的顺序不是添加的顺序而是添加顺序的相反顺序，而在IE6,7中 事件执行的顺序是随机的，和添加顺序无关。</p>
<p>&emsp;&emsp; 使用attachEvent方法还有个缺点是，this的值会变成window对象的引用而不是触发事件的元素。 </p>
<h2 id="跨浏览器的事件处理程序"><a href="#跨浏览器的事件处理程序" class="headerlink" title="跨浏览器的事件处理程序"></a>跨浏览器的事件处理程序</h2><p>&emsp;&emsp;就像上述提到的，老的IE浏览器的事件处理程序不同于标准的DOM2事件处理，所以为了兼容各浏览器的事件处理,我们可以用一个封装的工具函数来实现通用的添加，移除事件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var EventUtil=&#123;</span><br><span class="line">    addEventHandler: function(type,element,handler)&#123;</span><br><span class="line">        if(element.addEventListener)&#123;</span><br><span class="line">            element.addEventListener(type,handler,false);</span><br><span class="line">        &#125;else if(element.attachEvent)&#123;</span><br><span class="line">            element.attachEvent(&quot;on&quot;+type,element);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            element[&quot;on&quot;+type]=handler;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    removeEventHandler: function(type,element,handler)&#123;</span><br><span class="line">        if(element.removeEventListener)&#123;</span><br><span class="line">            element.removeEventListener(type,handler,false);</span><br><span class="line">        &#125;else if(element.detachEvent)&#123;</span><br><span class="line">            element.detachEvent(&quot;on&quot;+type,element);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            element[&quot;on&quot;+type]=null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h2><p>&emsp;&emsp;事件对象是用来记录一些事件发生时的相关信息的对象，但事件对象只有事件发生时才会产生，并且只能在事件处理函数内部访问，在所有事件处理函数结束后，事件对象会被销毁。</p>
<p>&emsp;&emsp;标准的Event对象属性主要有以下几个：</p>
<blockquote>
<ol>
<li>bubbles 布尔值,表示事件是否是冒泡类型</li>
<li>cancelable 布尔值，表示事件是否可以取消默认动作</li>
<li>currentTarget 当前目标元素，即添加当前事件处理程序的元素</li>
<li>target 实际目标元素，即实际触发事件的元素</li>
<li>type 返回当前事件的名称</li>
<li>eventPhase 事件传播的当前阶段,1表示捕获阶段</li>
</ol>
</blockquote>
<p>&emsp;&emsp;标准的Event对象的方法主要有以下几个：</p>
<blockquote>
<ol>
<li>preventDefault() 通知浏览器不要执行该事件的默认动作，常用于阻止链接的跳转，表单的提交，等标签的默认行为</li>
<li>stopPropagation() 冒泡阶段下,阻止事件的继续向上冒泡</li>
</ol>
</blockquote>
<h3 id="事件对象的兼容性"><a href="#事件对象的兼容性" class="headerlink" title="事件对象的兼容性"></a>事件对象的兼容性</h3><p>&emsp;&emsp;和事件处理程序一样，事件对象的属性和方法也存在兼容性问题。</p>
<ol>
<li>事件对象的获取<br>&emsp;&emsp;在IE8及以前的版本中，通过设置属性注册事件处理程序时，调用的时候并未传递事件对象，需要通过全局对象<code>window.event</code>来获取,解决方式如下:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function getEvent(event)&#123;</span><br><span class="line">    event = event || window.event</span><br><span class="line">&#125;</span><br><span class="line">function hander(event)&#123;</span><br><span class="line">    event = getEvent(event)</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>阻止默认事件行为</li>
</ol>
<p>&emsp;&emsp;IE浏览器的<code>event</code>事件没有<code>preventDefault()</code>这个方法，但是可以通过设置<code>event</code>的<code>returnValue</code>值为<code>false</code>来达到同样的效果，如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">window.event.returnValue=false;</span><br></pre></td></tr></table></figure>
<ol>
<li>阻止冒泡 </li>
</ol>
<p>&emsp;&emsp;IE浏览器的<code>event</code>对象也没有<code>stopPropagation()</code>方法，但可以设置<code>cancelBubble</code>属性为<code>true</code>，阻止事件的继续传播，如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">window.event.cancelBubble=true;</span><br></pre></td></tr></table></figure>
<h2 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h2><p>&emsp;&emsp;事件委托就是利用事件冒泡，只需指定一个事件处理程序，就可以管理某一类型的所有事件，通过事件委托，可以做到通过在祖先元素添加一个事件处理程序，就可以控制其子孙元素的某些行为。</p>
<ol>
<li>首先来看利用事件委托来管理某一类型的所有事件的例子。</li>
</ol>
<p>&emsp;&emsp;需求是未ul下的所有li添加click事件对应的行为处理，在没有用事件委托之前，代码是着这样的: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li&gt;列表项1&lt;/li&gt;</span><br><span class="line">&lt;li&gt;列表项2&lt;/li&gt;</span><br><span class="line">&lt;li&gt;列表项3&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var list=document.getElementsByTagName(&quot;li&quot;);</span><br><span class="line">for(i=0;i&lt;list.length;i++)&#123;</span><br><span class="line">    list[i].onclick=function()&#123;</span><br><span class="line">        alert(&quot;我是&quot;+e.target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;目前确实达到了，能够所有li都能对click事件有所响应了，但如果再添加一个添加列表项的按钮呢？当动态的添加列表项时，列表项元素被添加了，可是新添加的节点是没有绑定事件的(除非在添加元素时再加上绑定事件的逻辑)，到这里，我们发现了问题所在:</p>
<blockquote>
<ol>
<li>在所有元素上一一添加事件绑定会导致频繁的操作DOM获取元素,同时多个元素各自监听自己的事件，都会增加浏览器的消耗 </li>
<li>在页面中动态添加元素时，还需要重新走一遍添加监听事件的逻辑才能使新元素能够响应事件 </li>
</ol>
</blockquote>
<p>&emsp;&emsp;庆幸的是，针对这个问题，我们有更好的解决方案，即利用冒泡的原理实现的事件委托。 </p>
<p>&emsp;&emsp;我们只监听最外层元素，然后在事件处理函数中根据事件源，即<code>target</code>属性，进行不同的事件处理，这样，我们只需要针对一个元素添加事件处理程序，极大的降低了DOM访问，并且不需要单独为动态添加的元素添加监听事件了，因为元素的事件会冒泡到最外层，被最外层的事件处理程序截获,如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var ul=document.getElementById(&apos;ulList&apos;);</span><br><span class="line">ul.onclick=function(e)&#123;</span><br><span class="line">    var e= e || window.event;</span><br><span class="line">    var target = e.target || e.srcElement;</span><br><span class="line">    if(target.nodeName.toLowerCase() === &quot;li&quot;)&#123;</span><br><span class="line">        alert(&quot;我是&quot;+e.target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;从这个例子可以看出，当用事件委托的时候，完全不需要遍历元素的子节点，只需要给父级元素添加事件监听就好了，之后新添加的子节点也能够同样的对触发事件作出适当的响应 </p>
<ol>
<li>还有一个常见的利用事件委托的例子，就是点开浮层，关闭浮层，我们常常利用事件委托来监听元素外空间区域的点击，来关闭浮层。</li>
</ol>
<h3 id="Tips-3"><a href="#Tips-3" class="headerlink" title="Tips"></a>Tips</h3><blockquote>
<ol>
<li>不是所有事件都是可以委托的。适合用事件委托的事件有:<code>click mousedown mouseup keydown keyup keypresss</code></li>
</ol>
</blockquote>
<h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><ol>
<li>选择对的事件处理方式</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">function sayhi()&#123;</span><br><span class="line">    console.log(&quot;hi&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;button id=X onclick=&quot;sayhi&quot;&gt;A&lt;/butotn&gt;//Wrong</span><br><span class="line">&lt;button id=X onclick=&quot;sayhi()&quot;&gt;B&lt;/butotn&gt;//Right</span><br><span class="line">&lt;button id=X onclick=&quot;sayhi.call()&quot;&gt;C&lt;/butotn&gt;//Right</span><br><span class="line"></span><br><span class="line">X.onclick=print;//Right</span><br><span class="line">Y.onclick=print();//Wrong</span><br><span class="line">Z.onclick=print.call();//Wrong</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/18/不简单的绝对定位,浮动和display inline-block/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hitobear">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小笨熊的旅途">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/18/不简单的绝对定位,浮动和display inline-block/" itemprop="url">不简单的绝对定位,浮动和display inline-block</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-18T18:18:21+08:00">
                2018-03-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;绝对定位，浮动和<code>display:ilinline-block</code>都是界面布局中常用的设置方式，一直以为这几个属性很简单，在我眼里，想要绝对定位于一个元素时，才会用绝对定位(顾名思义？？)，想要让多个块级元素水平排列时用浮动或<code>display:inline-block</code>(曾经一度觉得这两种方式有些重复，感觉不到它们的区别。。所以自己常常用浮动，<code>display:inline-block</code>用的很少)，最近在看别人代码的时候，照着实现思路重新学习了一下这几个属性，所以这里对它们各自的特性，和彼此之间的异同点，以及何种情况该搬谁来当救兵做了一下小总结~</p>
<p>&emsp;&emsp;开始呢，还是想敲下重点，就是不管是为一个块级元素设置了<code>display:absolute;</code>,<code>float:..</code>,还是<code>display:inline-block</code>也好，这个块级元素的在文档流中的行为都会发生一个变化—就是，它会自动的具有包裹性了，宽度不再自适应父元素的宽度(不过绝对定位元素根据其它设置是会有例外的，稍后会提到)</p>
<h2 id="浮动定位元素"><a href="#浮动定位元素" class="headerlink" title="浮动定位元素"></a>浮动定位元素</h2><p>&emsp;&emsp;浮动元素可以用以下几个点来说明：</p>
<blockquote>
<p>特点：包裹性，脱离文档流(实际是半脱离)<br>应用场景：文字环绕效果；多个块级元素水平排列于一行<br>应用于：块级元素和行内元素皆可</p>
</blockquote>
<h3 id="多个块级元素水平排列成一排"><a href="#多个块级元素水平排列成一排" class="headerlink" title="多个块级元素水平排列成一排"></a>多个块级元素水平排列成一排</h3><p>&emsp;&emsp;需要让多个块级元素水平排列成一行，这是经常需要做的，如左右双列布局，那么既然要让多个元素在一行上，就不能用行内元素吗？答案是，有些情况确实不能，比如说需要给这个元素指定宽和高时，行内元素是不满足需求的。还有一种常见到浮动的应用的场景是水平列表项~ </p>
<h4 id="核心要点-利用包裹性"><a href="#核心要点-利用包裹性" class="headerlink" title="核心要点-利用包裹性"></a>核心要点-利用包裹性</h4><p>&emsp;&emsp;通过设置为浮动让多个元素可以处于一行，这个应用的核心离不开浮动元素的特性之一—包裹性(试想如果没有包裹性了，那么这个元素水平方向的宽度会向父元素的宽度去延展，自己在水平方向就沾满了，无论如何也放不下别人和自己挤在一排了~)</p>
<h4 id="记得善后-清除浮动-不占据文档流位置在作祟"><a href="#记得善后-清除浮动-不占据文档流位置在作祟" class="headerlink" title="记得善后-清除浮动(不占据文档流位置在作祟)"></a>记得善后-清除浮动(不占据文档流位置在作祟)</h4><p>&emsp;&emsp;虽然应用浮动后，看上去达到目的了，但不要忘了善后，清除浮动，因为如果不清除浮动的话，会严重影响其他元素的布局(因为它本身不占据文档流)，带来的后续麻烦可是大大的~~</p>
<p>&emsp;&emsp;上面也提到，浮动元素实际上是半脱离文档流，又为什么说是半脱离呢？这里不是明明说元素浮动以后不占据空间，这不就是脱离文档流了吗？看看下一个应用就知道啦~</p>
<h3 id="文字环绕效果"><a href="#文字环绕效果" class="headerlink" title="文字环绕效果"></a>文字环绕效果</h3><p>&emsp;&emsp;虽然这里文字环绕效果放到了后面写，但实际上最开始之所以有<code>float</code>就是为了实现文字环绕效果。</p>
<h4 id="环绕直接兄弟文字"><a href="#环绕直接兄弟文字" class="headerlink" title="环绕直接兄弟文字"></a>环绕直接兄弟文字</h4><p>&emsp;&emsp;什么是环绕直接兄弟文字呢？也就是一个浮动元素会环绕它的父元素中的文字，这些文字和它是直接兄弟的关系。 </p>
<p>&emsp;&emsp;以下代码是一个没有添加浮动的图像和文字为直接兄弟元素的情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  &lt;style&gt;</span><br><span class="line">    div.outer&#123;</span><br><span class="line">      width:400px;</span><br><span class="line">      border:1px solid red;</span><br><span class="line">    &#125;</span><br><span class="line">    div&gt;img&#123;</span><br><span class="line">      width:300px;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;outer&quot;&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;img src=&quot;http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19img_161967094653.jpg&quot;&gt;</span><br><span class="line">  我是应该要环绕的文字</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;目前真实的效果是这样的：</p>
<div text-align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19word1_20180319064514.png"></div>

<p>&emsp;&emsp;可以看到，此时虽然部门文字和图像是在一行的(由默认的行内元素和行内替换元素的对齐方式确实)，但也并不是包裹的效果，接下来为图像添加浮动效果： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">div&gt;img&#123;</span><br><span class="line">    float:left</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&amp;emsp;&amp;emsp;现在效果是这样的，果然文字能够环绕了：</span><br><span class="line"></span><br><span class="line">&lt;div text-align=&quot;center&quot;&gt;&lt;img src=&quot;http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19word2_20180319065327.png&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 侄子文字内容环绕 </span><br><span class="line"></span><br><span class="line">&amp;emsp;&amp;emsp;曾经一度以为浮动元素只是对直接兄弟元素文字才有影响，但实际上它对叔侄文字内容也有同样的影响，什么是叔侄文字内容呢？简单说就是浮动元素的兄弟元素(可以是行内元素，也可以是块级元素，总之有显示标签)的文字内容，像下面这样是不加浮动的图像和它的侄子文字的关系： </span><br><span class="line"></span><br><span class="line">``` &lt;style&gt;</span><br><span class="line">    div.outer&#123;</span><br><span class="line">      width:400px;</span><br><span class="line">      border:1px solid red;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">    div&gt;img&#123;</span><br><span class="line">      width:300px;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    div.inner&#123;</span><br><span class="line">      border:3px solid green;</span><br><span class="line">      width:350px;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;outer&quot;&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;img src=&quot;http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19img_161967094653.jpg&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;inner&quot;&gt;我是应该要环绕的文字&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;现在文字所在的<code>div</code>只是一个普通的块级元素的表现，效果如下：</p>
<div text-align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19word4_20180319070752.png"></div>

<p>&emsp;&emsp;同样地，为图像加上左浮动，效果如下：</p>
<div text-align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19word5_20180319073015.png"></div>

<p>&emsp;&emsp;也出现了文字环绕，可以看到即使文字是其它元素(如<code>div</code>,<code>span</code>等元素)的子元素，依然会受它的叔叔浮动元素的影响，并且这里有一个需要注意的点，<code>div</code>元素我们指定了宽度是<code>300px</code>,这里即使它紧邻浮动元素，它的指定宽度依然有效，只是它的宽度中的一大部分内容被浮动元素覆盖了，所以文字被挤到了<code>div</code>内容区的另一边,即文字并不像往常一样从父元素的最左侧开始了，(为浮动元素腾位置)，这里由div的边框就可以看到啦 </p>
<h3 id="半脱离文档流"><a href="#半脱离文档流" class="headerlink" title="半脱离文档流"></a>半脱离文档流</h3><p>&emsp;&emsp;从这上两个小节里里，我们除了体会到元素浮动后，它的直接兄弟文字/侄子兄弟文字能够环绕自己外，也能意会一下半脱离文档流： </p>
<blockquote>
<p>&emsp;&emsp; 一个元素浮动后，看上去好像不占据实际文档流空间，它的计算高度为0，进而导致它的父元素的高度为0，所以后续元素可以忽略它的存在，但是如果这个浮动元素直接兄弟元素/侄子元素是文字的话，这些文字还是会受到它的影响，去环绕这个浮动元素。 </p>
</blockquote>
<h2 id="绝对定位元素"><a href="#绝对定位元素" class="headerlink" title="绝对定位元素"></a>绝对定位元素</h2><p>&emsp;&emsp;绝对定位的元素的位置相对于最近的已定位祖先元素，如果元素没有已定位的祖先元素，那么它的位置相对于最初的包含块,这是绝对定位的定义</p>
<p>&emsp;&emsp;绝对定位元素可以用以下几个点来说明：</p>
<blockquote>
<p>特点：包裹性;完全脱离文档流;相对于其它元素定位;生成块级框(即使原来是行内框) </p>
<p>应用场景：绝对定位于某个元素的某个位置;为了动画效果(通过连续调整方位属性<code>left,right,top,bottom</code>来实现动画效果);为了脱离文档流，不影响其他元素的布局(宽度/高度) </p>
<p>应用于：块级元素和行内元素皆可</p>
</blockquote>
<p>&emsp;&emsp;绝对定位其实以前自己很少用，因为我潜意识里简单的认为它的作用只是单纯的像它的名字一样，就是用来绝对定位于一个元素的(只有绝对定位才能实现的定位效果其实也不多，所以很少用，哈哈)，不过最近才意识到，虽然它的名字是绝对定位，但它有很多魔法，利用它的包裹性，脱离文档流，生成块级框的特性可以实现很多巧妙的效果。</p>
<h3 id="绝对定位元素的包裹性"><a href="#绝对定位元素的包裹性" class="headerlink" title="绝对定位元素的包裹性"></a>绝对定位元素的包裹性</h3><p>&emsp;&emsp;一度以为浮动元素和行内元素才具有包裹性，但其实一个元素绝对定位以后也会产生包裹性，这里做一下强调，关于包裹性，最后一小节再详细总结~ </p>
<h3 id="绝对定位来实现导航栏的子列表效果效果"><a href="#绝对定位来实现导航栏的子列表效果效果" class="headerlink" title="绝对定位来实现导航栏的子列表效果效果"></a>绝对定位来实现导航栏的子列表效果效果</h3><p>&esmp;&esmp;&esmp;一个带字列表的水平导航栏，这个效果很常见，也不复杂，所以开始我写了一段代码像下面这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    ul&#123;</span><br><span class="line">      border: 1px solid black;</span><br><span class="line">    &#125;</span><br><span class="line">    li&#123;</span><br><span class="line">      list-style:none;</span><br><span class="line">    &#125;</span><br><span class="line">    .clearfix::after&#123;</span><br><span class="line">      content:&apos;&apos;;</span><br><span class="line">      display:block;</span><br><span class="line">      clear:both;</span><br><span class="line">    &#125;</span><br><span class="line">    div&gt;ul&gt;li&#123;</span><br><span class="line">      </span><br><span class="line">      border:1px solid green;</span><br><span class="line">      margin-left:20px;</span><br><span class="line">      float:left;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;ul class=&quot;clearfix&quot;&gt;</span><br><span class="line">      &lt;li&gt;首页&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;产品</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;产品1&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;产品2&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;产品3&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li&gt;帮助&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;问题&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;实际效果如下图：</p>
<div text-align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19nav1_20180320072437.png"></div>

<p>&emsp;&emsp;开始看上去好像没毛病，仔细看看这里产品和帮助之间的空隙明显比其它项之间的宽度要大(假想把边框去掉，因为边框是我自己方便调试加的~去掉会更明显看出这个bug)，那么有什么解决办法吗？</p>
<h4 id="解决有了字列表项后导航项宽度变宽的问题"><a href="#解决有了字列表项后导航项宽度变宽的问题" class="headerlink" title="解决有了字列表项后导航项宽度变宽的问题"></a>解决有了字列表项后导航项宽度变宽的问题</h4><p>&emsp;&emsp;仔细观察这个问题的原因，其实就是因为添加了字列表项后，子列表比较宽，而字列表也是导航栏中<code>nav&gt;ul&gt;li</code>导航项元素的一部分，所以导航项元素的宽度当然会受它的子列表项的宽度影响？那么有没有什么办法不受它的子列表项宽度影响呢？—-也可以的，让这个子列表项脱离文档流就可以了，所以我们为子列表项添加以下CSS设置： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">div&gt;ul&gt;li&#123;</span><br><span class="line">      ....</span><br><span class="line">      position:relative;</span><br><span class="line">&#125;</span><br><span class="line">div&gt;ul&gt;li&gt;ul &#123;</span><br><span class="line">      position:absolute;</span><br><span class="line">      top:100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;让子列表项<code>ul</code>相对于对应的导航项绝对定位，现在如下图所示：</p>
<div text-align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19nav2_20180320074424.png"></div>

<p>&emsp;&emsp;咦？现在各导航项之间的宽度一致了，不过又出了新的bug,子列表项太丑了，一个列表项还得换行？这是因为设置了绝对定位的元素，它的宽度虽然有包裹性，可以包裹自身的内容，但它的宽度还会有限制性，即不能大于它所相对的元素的宽度，所以在这里由于它所定位的那个元素(导航项)的宽度太小了，它自己的宽度也会尽可能收缩，这才有了这个bug,不过这个问题也好解决，再加一行CSS就可以： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div&gt;ul&gt;li&gt;ul &#123;</span><br><span class="line">      white-space:nowrap;//文字方面的属性，它的子元素会自动继承</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;再来看看下面最终的效果，大功告成啦：</p>
<div text-align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19nav3_20180320075313.png"></div> 

<h4 id="核心要点-利用脱离文档流特性和包裹性"><a href="#核心要点-利用脱离文档流特性和包裹性" class="headerlink" title="核心要点-利用脱离文档流特性和包裹性"></a>核心要点-利用脱离文档流特性和包裹性</h4><p>&emsp;&emsp;在这个应用中，核心并不是因为要定位子列表项才用了绝对定位方式(因为其它方式也可以达到想要的位置)，而是因为绝对定位元素的脱离文档流的特性， 才使得子元素可以不影响其它元素(导航项)的布局(包括宽、高、位置等等)，<br>同时绝对定位元素本身具有的包裹性，让子列表项可以自适应宽度，而不至于一味扩张(当然这里它的宽度受到它所相对于定位的元素的宽度的限制，不会大于这个宽度，所以要用<code>white-space:nowrap</code>) </p>
<h2 id="inline-block元素"><a href="#inline-block元素" class="headerlink" title="inline-block元素"></a><code>inline-block</code>元素</h2><p>&emsp;&emsp;设置为行内块的元素可以用以下几个点来说明：</p>
<blockquote>
<p>特点：包裹性，可以设置宽高<br>应用场景：多个块级元素水平排列于一行；用于自适应宽度<br>应用于：块级元素和行内元素皆可</p>
</blockquote>
<h3 id="多个块级元素水平排列成一排-1"><a href="#多个块级元素水平排列成一排-1" class="headerlink" title="多个块级元素水平排列成一排"></a>多个块级元素水平排列成一排</h3><p>&emsp;&emsp;多个块级元素水平排列成一排常常也可以用<code>display:inline-block</code>来实现 </p>
<h4 id="记得善后-解决多个display-inline-block元素之间的空隙"><a href="#记得善后-解决多个display-inline-block元素之间的空隙" class="headerlink" title="记得善后-解决多个display:inline-block元素之间的空隙"></a>记得善后-解决多个<code>display:inline-block</code>元素之间的空隙</h4><p>&emsp;&emsp;多个连续的<code>inline-bolock</code>元素在<code>html</code>中如果有换行符或空格，则浏览器中会表现出多余的空隙,这个问题可以通过设置<code>font-size:0</code>或者<code>letter-spacing</code>为负值来实现，详细了解可以看张鑫旭的文章—<a href="http://www.zhangxinxu.com/wordpress/2012/04/inline-block-space-remove-%E5%8E%BB%E9%99%A4%E9%97%B4%E8%B7%9D/" target="_blank" rel="noopener">去除inline-block元素间间距的N种方法</a> </p>
<h3 id="用于元素的宽度自适应"><a href="#用于元素的宽度自适应" class="headerlink" title="用于元素的宽度自适应"></a>用于元素的宽度自适应</h3><p>&emsp;&emsp;首先来看下面这样一个很常见的导航效果，试着把它做出来。 </p>
<div text-align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/19nav3_20180320075313.png"></div>

<h4 id="水平居中导航栏"><a href="#水平居中导航栏" class="headerlink" title="水平居中导航栏"></a>水平居中导航栏</h4><p>&emsp;&emsp;排除导航栏下方的水平提示条，先来做导航中的水平列表，初步设计一下，水平列表用<code>ul</code>元素下的多个浮动的<code>li</code>元素实现即可，考虑到图中的水平居中的效果，并且<code>ul</code>元素的宽度是不固定的(因为<code>li</code>元素的宽度也会随文字内容而增加)，所以这里就要在<code>ul</code>宽度自适应(总是自动刚好包裹内容)的同时水平居中，仔细想一下，要做到这些，好像只需把<code>ul</code>元素的<code>display</code>属性设置为<code>inline-block</code>即可，代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;  </span><br><span class="line">    nav&#123;</span><br><span class="line">      text-align:center;</span><br><span class="line">    &#125;</span><br><span class="line">    ul&#123;</span><br><span class="line">     </span><br><span class="line">      display:inline-block;</span><br><span class="line">    &#125;</span><br><span class="line">    li&#123;</span><br><span class="line">      list-style:none;</span><br><span class="line">    &#125;</span><br><span class="line">    .clearfix::after&#123;</span><br><span class="line">      content:&apos;&apos;;</span><br><span class="line">      display:block;</span><br><span class="line">      clear:both;</span><br><span class="line">    &#125;</span><br><span class="line">    nav&gt;ul&gt;li&#123;</span><br><span class="line">      </span><br><span class="line">   </span><br><span class="line">      margin-left:20px;</span><br><span class="line">      float:left;</span><br><span class="line">      position:relative;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    nav&gt;ul&gt;li:nth-child(1)&#123;</span><br><span class="line">      margin-left:0;</span><br><span class="line">    &#125;</span><br><span class="line">    nav&gt;ul&#123;</span><br><span class="line">      margin:0;</span><br><span class="line">      padding:0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">  &lt;nav&gt;</span><br><span class="line">    &lt;ul class=&quot;clearfix&quot;&gt;</span><br><span class="line">      &lt;li&gt;首页&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;产品&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;帮助&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;问题&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/nav&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;可以看到，为了实现<code>nav</code>水平居中的效果，主要利用了以下两个特性：</p>
<blockquote>
<p>&emsp;&emsp;将<code>ul</code>设置为<code>inline-block</code>元素，通过具有包裹性使其自适应子元素宽度<br>&emsp;&emsp;为<code>ul</code>的父元素<code>nav</code>设置<code>text-align:center</code>属性，使<code>ul</code>元素(行内块)水平居中 </p>
</blockquote>
<h4 id="添加下方的bar"><a href="#添加下方的bar" class="headerlink" title="添加下方的bar"></a>添加下方的<code>bar</code></h4><p>&emsp;&emsp;正如图中所示，还需要在导航条下方添加一个等宽的水平条，根据语义化原则，我们可以把<code>bar</code>添加到<code>nav</code>的后一个子元素中，像下面这样： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav&gt;</span><br><span class="line">    &lt;ul class=&quot;clearfix&quot;&gt;</span><br><span class="line">      &lt;li&gt;首页&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;产品&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;帮助&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;问题&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;div class=&quot;bar&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/nav&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;但是问题来了，像图中一样，<code>bar</code>的宽度也是自适应的，明显它和<code>ul</code>列表的宽度是保持一致的,这如何做到呢？很明显照目前的布局是无法做到的，因为<code>ul</code>列表的宽度只是自适应，没有具体值，不能给它的兄弟元素<code>bar</code>传递任何具体信息，而<code>bar</code>的父元素是块级元素<code>nav</code>,宽度自动扩张类型的，分析到这里，看似走到死胡同，但谜底好像也来了，只要让<code>nav</code>不再是块级元素，也是<code>inline-block</code>元素不就好了嘛，这样<code>nav</code>就会具有包裹性自适应子元素<code>ul</code>的宽度，而另一个子元素<code>bar</code>的宽度也会随之自适应了，同时<code>nav</code>设置为<code>inline-block</code>后，之前设置的居中效果无效了，只需再为<code>nav</code>的父元素设置<code>text-align:center</code>属性即可，变更代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">.wrapper&#123;</span><br><span class="line">     text-align:center;</span><br><span class="line">   &#125;</span><br><span class="line">   .bar&#123;</span><br><span class="line">     height:5px;</span><br><span class="line">     background:#fff;</span><br><span class="line">     border-radius:6px;</span><br><span class="line">   &#125;</span><br><span class="line">   .bar::after&#123;</span><br><span class="line">     display:block;</span><br><span class="line">     content:&apos;&apos;;</span><br><span class="line">     height:100%;</span><br><span class="line">     background:red;</span><br><span class="line">     width:40px;</span><br><span class="line">     border-radius:6px;</span><br><span class="line">   &#125;</span><br><span class="line">   nav&#123;</span><br><span class="line">     display:inline-block;</span><br><span class="line">     .......</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;&emsp;可以看到，在这个应用中，不管是做水平导航栏还是在完成下方的<code>bar</code>时，我们并没有想要利用<code>inline-block</code>去水平排列多个块级元素(在水平导航栏的实现中，利用了浮动)，但是每一步中我们的核心都利用了<code>display:inline-block</code>属性,目的就是使块级元素的宽度自适应(看来<code>inline-block</code>能使块级元素宽度自适应这个功能还是很有用的，常常被我忽略~~) </p>
</blockquote>
<h2 id="不简单的包裹性"><a href="#不简单的包裹性" class="headerlink" title="不简单的包裹性"></a>不简单的包裹性</h2><p>&emsp;&emsp;原来包裹性不只是简单的能包裹住它里面的内容，它还会受到一些限制，也可能有一些附加功能，这里也做一些总结 </p>
<h3 id="包裹性元素的类型"><a href="#包裹性元素的类型" class="headerlink" title="包裹性元素的类型"></a>包裹性元素的类型</h3><p>&emsp;&emsp;首先行内块元素和行内元素是自身就具有包裹性的，这里所要说的是将块级元素转换为具有包裹性元素的情况，主要有以下三种:</p>
<ul>
<li><p>设置为浮动元素 </p>
</li>
<li><p>通过<code>display:inline-block</code>设置为行内块元素 </p>
</li>
<li><p>设置为绝对定位元素 </p>
</li>
</ul>
<p>Tips:这里仅仅是说这几种设置方式应用于块级元素会使得块级元素具有包裹性，不代表他们不能应用于行内元素，只是那时候可能会有其它作用:) </p>
<h3 id="包裹性元素宽度的限制"><a href="#包裹性元素宽度的限制" class="headerlink" title="包裹性元素宽度的限制"></a>包裹性元素宽度的限制</h3><p>&emsp;&emsp;包裹性元素的宽度并不是单纯的由自身的内容决定，它们还会受到一些其它方面的限制，它们各自都有自己的宽度最大值：</p>
<blockquote>
<p>&emsp;&emsp;都可以显示指定宽度来限制包裹性元素的最大宽度值 </p>
<p>&emsp;&emsp;<code>inline-block</code>的元素的宽度最大值受到其父元素宽度的限制 </p>
<p>&emsp;&emsp;浮动元素虽然(半)脱离文档流，但它的宽度最大值也要受到其父元素宽度的限制 </p>
<p>&emsp;&emsp; 绝对定位元素时完全脱离文档流的，但它和浮动元素类似，也会受到普通文档流中的元素的宽度的限制，只是这个元素不一定是其父元素，而是被它绝对定位于的那个元素(它的第一个定位过的祖先元素或根元素) </p>
</blockquote>
<h3 id="包裹性元素的包裹性"><a href="#包裹性元素的包裹性" class="headerlink" title="包裹性元素的包裹性"></a>包裹性元素的包裹性</h3><p>&emsp;&emsp;在满足包裹性元素的宽度限制的情况下，它会尽可能的延展自己的宽度能够包裹住自身内容，当刚好包裹的时候，停止延展；反之，如果在延展的过程中，达到了它的极限值，即上一节计算出的应有的最大值，这时候它的内容(如文字，指定宽度的块级子元素除外，因为想换行也换不了:)会自动换行。</p>
<h3 id="包裹性元素的包裹性会影响子级块元素的宽度"><a href="#包裹性元素的包裹性会影响子级块元素的宽度" class="headerlink" title="包裹性元素的包裹性会影响子级块元素的宽度"></a>包裹性元素的包裹性会影响子级块元素的宽度</h3><p>&emsp;&emsp;无论是<code>inline-block</code>,浮动元素，还是绝对定位元素所形成的包裹性元素，都不只是仅仅使得自身具有包裹性，而是会进一步影响其子孙元素，使他们的宽度被限制。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/18/用animation-delay实现一个loading效果/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hitobear">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小笨熊的旅途">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/18/用animation-delay实现一个loading效果/" itemprop="url">用animation-delay实现一个loading效果</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-18T08:53:08+08:00">
                2018-03-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>要实现的loading效果是这样的<a href="https://jsbin.com/nulasok/edit?html,output" target="_blank" rel="noopener">点击这里查看</a>,这里对如何制作这样一个loading效果做一下总结</p>
<h2 id="效果分析"><a href="#效果分析" class="headerlink" title="效果分析"></a>效果分析</h2><ol>
<li>打开Console的Animations选项卡，以10%的速率放慢动画观察效果</li>
<li>发现动画是由内外两个圆圈组成，而且内外圆圈效果几乎一样，只是有不同的动画延迟<br>3.圆圈由小到大，逐渐淡出<h2 id="效果实现"><a href="#效果实现" class="headerlink" title="效果实现"></a>效果实现</h2></li>
</ol>
<h3 id="外层wrapper"><a href="#外层wrapper" class="headerlink" title="外层wrapper"></a>外层wrapper</h3><p>首先画一个wrapper,让动画的两个圆圈在这个wrapper中绝对居中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> #wrapper&#123;</span><br><span class="line">      width:100px;</span><br><span class="line">      height:100px;</span><br><span class="line">      border:1px solid red;</span><br><span class="line">      position:relative;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div id=&quot;wrapper&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="第一个圆圈"><a href="#第一个圆圈" class="headerlink" title="第一个圆圈"></a>第一个圆圈</h3><p>画出第一个圆圈，让其居中于外层wrapper,且自带动画效果，由小到大，逐渐淡出，动画效果呈线性，且无限循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">.circle&#123;</span><br><span class="line">      width:10px;</span><br><span class="line">      height:10px;</span><br><span class="line">      background:black;</span><br><span class="line">      border-radius:50%;</span><br><span class="line"></span><br><span class="line">     //绝对定位居中于父元素</span><br><span class="line">      position:absolute;</span><br><span class="line">      left:0;</span><br><span class="line">      right:0;</span><br><span class="line">      top:0;</span><br><span class="line">      bottom:0;</span><br><span class="line">      margin:auto;</span><br><span class="line"></span><br><span class="line">      //圆圈的动画效果</span><br><span class="line">      animation: s 1.5s linear infinite;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//动画定义</span><br><span class="line">@keyframes s&#123;</span><br><span class="line">      0%&#123;width:0px; height:0px; opacity:1;&#125;</span><br><span class="line">      100%&#123;width:100px; height:100px; opacity:0;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;div id=&quot;wrapper&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;cirle&quot;&gt;&lt;circle&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="第二个圆圈"><a href="#第二个圆圈" class="headerlink" title="第二个圆圈"></a>第二个圆圈</h3><p>将第二个圆圈设为和第一个一样的效果，只是加上合适时间的动画延迟<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#wrapper:nth-child(2)&#123;</span><br><span class="line">      animation-delay:0.75s;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;div id=&quot;wrapper&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;cirle&quot;&gt;&lt;circle&gt;</span><br><span class="line">  &lt;div class=&quot;cirle&quot;&gt;&lt;circle&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>目前为止，loading动画已经基本实现，接下来，做一些些优化</p>
<h3 id="代码优化"><a href="#代码优化" class="headerlink" title="代码优化"></a>代码优化</h3><h4 id="用伪元素代替div"><a href="#用伪元素代替div" class="headerlink" title="用伪元素代替div"></a>用伪元素代替div</h4><p>效果中，wrapper元素中的两个圆圈只是用来设置了元素样式，没有充当其他元素的容器，所以这里我们用before,after伪元素来替代两个circle类元素，注意：<strong>伪类元素要生效必须设置<code>content</code>属性</strong></p>
<h4 id="用loading类代替wrapper"><a href="#用loading类代替wrapper" class="headerlink" title="用loading类代替wrapper"></a>用loading类代替wrapper</h4><p>用loading代替class,使元素更具有语义化</p>
<p>最终代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;</span><br><span class="line">  &lt;title&gt;loading animation&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    .loading&#123;</span><br><span class="line">      width:100px;</span><br><span class="line">      height:100px;</span><br><span class="line">      position:relative;</span><br><span class="line">    &#125;</span><br><span class="line">    .loading::before,.loading::after&#123;</span><br><span class="line">      content:&apos;&apos;;</span><br><span class="line">      width:10px;</span><br><span class="line">      height:10px;</span><br><span class="line">      position:absolute;</span><br><span class="line">      background:black;</span><br><span class="line">      border-radius:50%;</span><br><span class="line">      left:0;</span><br><span class="line">      right:0;</span><br><span class="line">      top:0;</span><br><span class="line">      bottom:0;</span><br><span class="line">      margin:auto;</span><br><span class="line">      animation: s 1.5s linear infinite;</span><br><span class="line">    &#125;</span><br><span class="line">    .loading::after&#123;</span><br><span class="line">      animation-delay:0.75s;</span><br><span class="line">    &#125;</span><br><span class="line">    @keyframes s&#123;</span><br><span class="line">      0%&#123;width:0px; height:0px; opacity:1;&#125;</span><br><span class="line">      100%&#123;width:100px; height:100px; opacity:0;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;loading&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>现在只要引入如下代码，就能引入loading元素了,具体效果可以看这里- <a href="https://jsbin.com/nulasok/edit?html,output" target="_blank" rel="noopener">用JSbin打开]loading animation</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;loading&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/15/块级元素具有包裹性后其宽度和其后代块级元素宽度的关系/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hitobear">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小笨熊的旅途">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/15/块级元素具有包裹性后其宽度和其后代块级元素宽度的关系/" itemprop="url">块级元素具有包裹性后其宽度和其后代块级元素宽度的关系</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-15T21:40:48+08:00">
                2018-03-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>普通块级元素的宽度是受到父元素宽度影响的，满足等式<code>子元素margin-left+子元素border-left+子元素padding-left+子元素width+子元素padding-right+子元素border-right+子元素paddig-right=父元素width</code>,<br>当子元素的边框值，内外边距都等于0时，由公式可以推导出，子元素的宽度即等于父元素的宽度。<br>即普通的块级元素的宽度是具有扩张性的，即以父元素为基础(父元素的宽度是固定的)，会自动填充父元素的内容，但是当块级元素具有包裹性后，它的宽度会由自身内容决定，完全不同以往，那么块级元素如何才会具有包裹性呢？</p>
<h2 id="块级元素如何具有包裹性"><a href="#块级元素如何具有包裹性" class="headerlink" title="块级元素如何具有包裹性"></a>块级元素如何具有包裹性</h2><p>要让块级元素具有包裹，可以划分为三种方式</p>
<ul>
<li>通过为元素属性<code>display</code>设置为<code>inline-block</code>将元素设置为行内块元素</li>
<li>将元素设置为浮动元素</li>
<li>将元素设置为绝对定位(<code>absolute</code>或者<code>fixed</code>)<h2 id="包裹性块级元素的宽度"><a href="#包裹性块级元素的宽度" class="headerlink" title="包裹性块级元素的宽度"></a>包裹性块级元素的宽度</h2>固名思义，包裹性块级元素，既然包裹，那么它的宽度会由它的内容的宽度来决定，道理很简单，但真的是这样简单吗，举例说明就知道了~</li>
</ul>
<h2 id="包裹型元素和其子元素宽度的互相影响"><a href="#包裹型元素和其子元素宽度的互相影响" class="headerlink" title="包裹型元素和其子元素宽度的互相影响"></a>包裹型元素和其子元素宽度的互相影响</h2><p>为了更明显的观察规律，本例中为所有元素都添加了不同颜色的边框。<br>首先来看一个普通div元素的宽度，和这个元素行内块化后的效果对比图：</p>
<div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/14inline1.png"></image></div>


<p>相关代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.outer&#123;</span><br><span class="line">      border:2px solid red;</span><br><span class="line">    &#125;</span><br><span class="line">    div&#123;</span><br><span class="line">      margin-bottom:5px;</span><br><span class="line">      padding-top:2px;</span><br><span class="line">      padding-bottom:2px;</span><br><span class="line">    &#125;</span><br><span class="line">    .inlineblock&#123;</span><br><span class="line">      display:inline-block;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">.first span&#123;</span><br><span class="line">      border: 1px solid green;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;div class=&quot;outer&quot;&gt;我是一个普通块级元素&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot; outer inlineblock first&quot;&gt;&lt;span&gt;我是一个inline-block元素&lt;/span&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>可见，为外层div设置为<code>inline-block</code>后,当其子元素为非块级元素时，元素的宽度由子元素的宽度决定</p>
<h3 id="当包裹型元素的子元素同时有块级元素和非块级元素时"><a href="#当包裹型元素的子元素同时有块级元素和非块级元素时" class="headerlink" title="当包裹型元素的子元素同时有块级元素和非块级元素时"></a>当包裹型元素的子元素同时有块级元素和非块级元素时</h3><p>想到这个问题时，总会一不小心发现一个悖论，包裹型元素本身的宽度由其子元素的宽度决定，那么当它的子元素是一个普通块级元素时，也不例外吗？这样的话，父元素由子元素决定，但因为这个子元素是一个普通块级元素，普通块级元素的宽度不是由父元素决定吗？这样无线循环，到底要怎样呢（懵懵懵），额，既然这样，直接看例子还是，看能不能找得到答案</p>
<p>首先来做第一个实验，相关示例代码如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">.outer&#123;</span><br><span class="line">      border:2px solid red;</span><br><span class="line">    &#125;</span><br><span class="line">    div&#123;</span><br><span class="line">      margin-bottom:5px;</span><br><span class="line">      padding-top:2px;</span><br><span class="line">      padding-bottom:2px;</span><br><span class="line">    &#125;</span><br><span class="line">    .inlineblock&#123;</span><br><span class="line">      display:inline-block;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">.seconed span&#123;</span><br><span class="line">      border: 1px solid green;</span><br><span class="line">    &#125;</span><br><span class="line">.seconed div&#123;</span><br><span class="line">    border: 1px solid black;</span><br><span class="line">&#125;</span><br><span class="line">  &lt;div class=&quot; outer inlineblock seconed&quot;&gt;</span><br><span class="line">    &lt;span&gt;我是一个inline-block元素&lt;/span&gt;</span><br><span class="line">    &lt;div&gt;我是一个div元素，内容比较长&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>图示效果如下：</p>
<div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/14inline2.png"></image></div>

<p>由图中可以看出，外层inline-block元素的边框是紧紧包裹着内层div元素的，而div元素的边框恰好包裹了自身的内容，从这里是不是可以推出？当一个div具有包裹性后，其后代块级元素的宽度也具有了包裹性，由自身的内容决定，同样的，最外层的div由内层的块级元素的宽度决定了？由这个效果看确实是符合的。</p>
<p>然后，下面一次实验中我仅仅是把元素的文字内容换了，结果效果却大不相同，文字内容变换部分如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot; outer inlineblock seconed&quot;&gt;</span><br><span class="line">  &lt;span&gt;我是一个inline-block元素,内容比较长&lt;/span&gt;</span><br><span class="line">  &lt;div&gt;我是一个div元素，内容比较短&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>此时效果如下：</p>
<div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/14inline3.png"></image></div>

<p>乍一看好像没什么不同，外层div的红色边框依然紧紧包裹着内层div的黑色边框，可仔细一看发现了异常，说好的内层div继承包裹性呢？这里明明它的黑色边框没有包裹住自身的文字内容，反倒看上去相似填充了外层div的宽度，这不是和上一例相矛盾吗？话说回来，这次内层div填充了外层div的宽度，那外层div宽度是哪儿来的？不要忘了，它还有另一个span子元素，这时候的外层div的边框不是恰好包裹了span子元素的边框吗？这样好像说的通了，可是外层元素到底是根据div子元素的宽度而定还是根据span子元素的内容而定呢？div子元素的边框到底是包裹自身内容还是应该填充父元素的内容呢？其实也简单，不妨分几步看一下</p>
<p>当一个块级元素具有包裹性时，它本身的宽度和它的子元素的宽度计算法则可以按照以下步骤：<br>1.首先找出该元素的所有非块级子元素，并分别按行计算出一行中的非块级子元素的和宽度和，取宽度和最大的一个，计为maxInineWidth,如上面两个例子中，子元素中只有一行涉及到了非块级元素，且该行只有一个span元素，因此span元素的宽度即是这里所求的maxInlineWidth值(注意：极端情况不含有非块级子元素，maxInlineWidth值为0)</p>
<ol>
<li>然后计算下各个普通文档流块级元素的宽度(脱离文档流的块级元素无需计算在内)，将块级子元素看做是纯包裹性元素，即它的宽度由其自身内容而定，找出最宽的div，将这个宽度值记为maxDivWidth<br>3.比较maxInlineWidth和maxDivWidth的值，取最大的一个，记为maxWidth,则外层的div对的宽度即为maxWidth<br>4.现在外层div的宽度已经确定了，所有子块级元素的宽度该扩充外层div了，即在第二步中计算出的所有宽度小于maxWidth的块级元素，都自动扩充内容区域填满外层div的宽度(而子元素中不属于块级元素的元素无需扩张了，因为行内块元素本身就是实实在在的包裹性元素，不受父元素宽度影响，当然，父元素宽度过小时，也会影响它，即它的宽度不会超过父元素，如文字内容在触碰到父元素的边框时会自动换行)</li>
</ol>
<p>以上的计算方式其实是在外层包裹性元素的宽度不会受其它元素限制，可以随子元素内容扩充的情况下才有效的，即若外层包裹性元素的宽度受限的话，计算出的maxWidth有可能大于外层包裹性元素的受限宽度，此时，该外层包裹性元素的宽度依然取得是它的受限宽度(即因为受限，宽度最大不能超过XXX，或者因为受限，宽度必须为XXX)，受限的情况可能有好几种，比如以下两种情况：</p>
<ul>
<li><p>该包裹性元素的父元素的宽度是一定的，那么该元素的宽度肯定不会超过父元素(<strong>如果包裹性元素是绝对定位元素，则是它的宽度不会超过被绝对定位的元素的宽度,本文中提到包裹性元素和父元素的关系时，如果是绝对定位元素，则父元素均应用被绝对定位的那个元素替换，本文其它地方为了统一说明，均用父元素代替</strong>)的宽度值，此时跳过第2,3，步，直接取受限宽度和maxInlineWidth值的最大值作为外层包裹性元素的宽度即可，其它步骤一样；</p>
</li>
<li><p>显示为该包裹性元素指定了width值得话，那么该包裹性元素的宽度值也确定了，此时可以直接跳过1,2,3，即maxWidth的值直接为它的指定值，子块级元素受限于该外层div元素的同时也会依据它来扩充（即子元素的宽度不会超过该宽度值，但当子块级元素按包裹性计算为比该宽度值小时，又会自动扩充到该宽度值）。</p>
</li>
</ul>
<p>由第3步可以看到，<strong>外层div的宽度是不会受到子元素中的不处于文档流的元素(如绝对定位或浮动)的任何影响的，但子元素中的不处于文档流的块级元素自身的宽度还是和普通块级元素一样，是会受到外层包裹元素宽度的制约的(不会超过这个值)，不同的一点是，它不会自动扩充为何外层包裹性元素同宽(当自身包裹内容原本小于父元素宽度值时，因为脱离文档流了，变为纯包裹性元素(浮动元素和绝对定位元素都是)不再自动扩充。。)</strong>。自己试验验证一下即可，也可以看<a href="https://hitobear.github.io/2018/03/14/%E4%BB%8E%E4%B8%80%E6%AC%A1%E5%88%A9%E7%94%A8%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D%E5%BC%95%E5%8F%91%E7%9A%84bug%E6%84%9F%E6%82%9F%E5%87%BA%E5%85%83%E7%B4%A0%E7%9A%84%E5%8C%85%E8%A3%B9%E6%80%A7%E5%AE%BD%E5%BA%A6/" target="_blank" rel="noopener">这篇文章</a>的一个例子了解一下。</p>
<p>综上：当外层块级元素具有包裹性后(可能由于浮动，绝对定位，或变为行内块元素)，它和它的子块级元素的宽度是互相影响的，并不是绝对的一个根据另一个而定，只不过表现的结果是，不管哪种情况(父级元素宽度等于子级元素宽度，或子级元素宽度扩充为父级元素宽度)，表现结果均为，父级元素宽度和子级块元素的宽度是一样的(当子级块元素非处于文档流中的元素中时则例外，<strong>此时因为变为纯包裹性元素，和行内块元素一样，有可能小于父级元素宽度</strong>）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/14/从一次利用块级元素绝对定位引发的bug感悟出元素的包裹性宽度/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hitobear">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小笨熊的旅途">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/14/从一次利用块级元素绝对定位引发的bug感悟出元素的包裹性宽度/" itemprop="url">从一次利用块级元素绝对定位引发的bug感悟出元素的包裹性宽度</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-14T00:13:19+08:00">
                2018-03-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这篇总结的起因为我在写导航栏时遇到的一个bug,开始时，导航栏的相关代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;</span><br><span class="line">  &lt;title&gt;JS Bin&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    a&#123;</span><br><span class="line">        text-decoration:none;</span><br><span class="line">        color:white;</span><br><span class="line">    &#125;</span><br><span class="line">    li&#123;</span><br><span class="line">      list-style: none;</span><br><span class="line">    &#125;</span><br><span class="line">   .header nav&#123;</span><br><span class="line">        float:right;</span><br><span class="line">        padding-top:7px;</span><br><span class="line">    &#125;</span><br><span class="line">    nav&gt;ul&gt;li &#123;</span><br><span class="line">        float:left;</span><br><span class="line">        margin:0 17px;</span><br><span class="line">    &#125;</span><br><span class="line">    nav&gt;ul&gt;li&gt;a &#123;</span><br><span class="line">        </span><br><span class="line">        border-top:   3px solid transparent; </span><br><span class="line">        border-bottom: 3px solid transparent;</span><br><span class="line">        padding-top:5px;</span><br><span class="line">        padding-bottom:5px;</span><br><span class="line">        display:block;</span><br><span class="line">        font-weight:bold;</span><br><span class="line">        font-size:12px;</span><br><span class="line">        color:inherit;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;div class=&quot;header clearfix&quot; id=&quot;header&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;header-inner&quot;&gt;</span><br><span class="line">            &lt;nav&gt;</span><br><span class="line">                &lt;ul class=&quot;clearfix&quot;&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;关于&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;技能&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;作品&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;博客&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;日历&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;联系方式&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;其他&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/nav&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>效果如下图一：</p>
<div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/13nav0_20180313225537.png"></image></div>

<div align="center">图1</div><br>接下来我要实现的效果是在博客这一列表项下添加3个子列表，所以我对html简单了添加了以下内容：<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;</span><br><span class="line">       &lt;a href=&quot;#&quot;&gt;博客&lt;/a&gt;</span><br><span class="line">      &lt;ul&gt;//新增ul元素</span><br><span class="line">             &lt;li&gt;博客1&lt;/li&gt;</span><br><span class="line">             &lt;li&gt;博客2&lt;/li&gt;</span><br><span class="line">              &lt;li&gt;博客2&lt;/li&gt;</span><br><span class="line">       &lt;/ul&gt;</span><br><span class="line"> &lt;/li&gt;</span><br></pre></td></tr></table></figure><br><br>现在，导航栏效果如下图2：<br><br><div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/13nav2_20180313230704.png"></image></div>

<div align="center">图2</div><br>可以看到，添加了ul列表后，基本实现了子级列表项，但可以明显的看到，此时原列表项博客，收到了子列表项宽度的影响，被明显的拉宽了，这样显然不优雅，那么有没有什么办法，使其不受子列表项的影响，自身宽度保持不变呢？这时候想到了，将子列表项绝对定位，使其脱离文档流， 这样它的宽度肯定不会影响到父元素的宽度了，于是为字列表项ul元素添加了相对于父元素li的绝对定位，相关CSS代码如下：<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nav&gt;ul&gt;li &#123;</span><br><span class="line">        position:relative;</span><br><span class="line">    &#125;</span><br><span class="line">    nav&gt;ul&gt;li&gt;ul&#123;</span><br><span class="line">      position:absolute;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br><br>本以为这下可以完成任务了，结果刷新后，效果却如下图3所示<br><div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/13nav3_20180313231556.png"></image></div><br><div align="center">图2</div><br>是的，正如图中所示，绝对定位解决了列表项宽度受影响的问题，但却引入了新的问题，子列表项的宽度太窄了！！那么这是什么原因呢？实验后发现这个表现有两方面的综合原因。<br><br>## 块级元素绝对定位后，它本身及其所有后代块级元素会有包裹性<br>最开始的块级元素及其子元素的代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> .pos&#123;</span><br><span class="line">      </span><br><span class="line">      border:1px solid red;</span><br><span class="line">    &#125;</span><br><span class="line">    .first&#123;</span><br><span class="line">      border: 1px solid green;</span><br><span class="line">      margin-bottom:10px;</span><br><span class="line">    &#125;</span><br><span class="line">    .seconed&#123;</span><br><span class="line">      border: 1px solid black;</span><br><span class="line">    &#125;</span><br><span class="line">    .seconed div&#123;</span><br><span class="line">      border: 1px solid #888;</span><br><span class="line">      margin-bottom:5px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;pos&quot;&gt;&lt;div class=&quot;first&quot;&gt;第一个子元素div&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;seconed&quot;&gt;&lt;div&gt;第二个子元素的子元素1 &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;第二个子元素的子元素2 &lt;/div&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure><br><br>效果如下图4所示：<br><div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/13nav4_20180313234058.png"></image></div>

<div align="center">图4</div>

<p>然后为了观察绝对定位的影响，为最外层的div元素设置为绝对定位，如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.pos&#123;</span><br><span class="line">      position:absolute;</span><br><span class="line">     ......</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>之后，效果如图5：</p>
<div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/13nav5_20180313234109.png"></image></div>

<div align="center">图5</div>

<p>对比图5发现，添加绝对定位以后，不管是其本身还是直接子元素<code>first</code>类的<code>div</code>,或是其孙元素<code>seconed</code>类的<code>div</code>的子元素，其宽度均收缩为所包含文字需要的宽度，不再主动填充外层容器，展现了其宽度的包裹性。</p>
<h2 id="块级元素绝对定位后，它本身的宽度依然不能超过父元素的宽度"><a href="#块级元素绝对定位后，它本身的宽度依然不能超过父元素的宽度" class="headerlink" title="块级元素绝对定位后，它本身的宽度依然不能超过父元素的宽度"></a>块级元素绝对定位后，它本身的宽度依然不能超过父元素的宽度</h2><p>这个特性其实是通俗特性的扩展，及无论是否脱离文档流，div元素本身的宽度都不能自动超出父元素的宽度，除非显示指定宽度值。<br>在最开始的导航栏一例中，设置了绝对定位后，因为脱了了文档流，而恰好其父元素<code>li</code>又设置过<code>float:left</code>属性，因此<code>li</code>的宽度本身就又包裹性，<strong>(浮动元素的宽度包裹性和绝对定位元素的宽度包裹性异曲同工)</strong>,只会包裹住其子元素a标签的内容，(因为ul绝对定位后脱离了文档流，没有绝对定位时还在文档流中，是可以包裹住的，所以绝对定位前ul列表的宽度是正常的)，所以ul标签的宽度受限于父元素li的宽度，当然很窄了！！</p>
<h2 id="如何解决层层包裹性带来的文字自动换行的bug"><a href="#如何解决层层包裹性带来的文字自动换行的bug" class="headerlink" title="如何解决层层包裹性带来的文字自动换行的bug?"></a>如何解决层层包裹性带来的文字自动换行的bug?</h2><p>经过上面的分析，这里bug的主要原因还是 <code>ul</code>绝对定位以后元素自身脱离文档流，导致浮动的父元素<code>li</code>(本身也有包裹性)未将子元素<code>ul</code>宽度包裹住，只包裹了<code>a</code>标签的宽度，所以，虽然此时ul按理说应该能包裹住子元素的宽度的，但是因为其父元素li宽度过窄，导致ul及其子元素的宽度也受限，其文字内容不得不自动换行了。<br>这里为了解决这个bug，可以换一种思路，只要文字不自动换行是不是就可以了？添加如下样式，即增加<br><code>white-space:nowrap;</code>属性设置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nav&gt;ul&gt;li&gt;ul&#123;</span><br><span class="line"> .....</span><br><span class="line">  white-space:nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>现在效果如图6所示：</p>
<div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/13nav6_20180314000504.png"></image></div>

<div align="center">图6</div>

<p>bug完美解决了~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/13/理解prototype和_proto_/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hitobear">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小笨熊的旅途">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/13/理解prototype和_proto_/" itemprop="url">理解prototype和__proto__</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-13T21:48:31+08:00">
                2018-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>prototype和<strong>proto</strong>时对象属性的访问过程中至关重要的两个属性，这里主要对这两个属性的特点和意义作一些总结。</p>
<h1 id="从对象的属性说起"><a href="#从对象的属性说起" class="headerlink" title="从对象的属性说起"></a>从对象的属性说起</h1><p>首先，<strong>假设不存在prototype和<strong>proto</strong></strong>,我们知道JS的是存在Object类型的，和很多面向对象语言一下，类型是对多个同种类对象的封装，如学生A存在年龄，姓名，性别，父母，学校，班级,toString,valueOf等属性，和起床，跑步，上学，下课四个方法，学生B，C同样存在这些属性和方法，为了统一管理这些学生的属性和行为，我们可以提供一个Student类，Student类中包含了所有的这些属性和方法，这是通过Student类就可以创建多个学生对象，假设创建了学生a,b,c,现在内存中a,b,c对象的构成是下图1所示的样子：</p>
<div align="center"><img src="http://p4a8bakov.bkt.clouddn.com/objectorigin.png"></div><br><div align="center">图1</div>

<h2 id="多个同类对象的问题"><a href="#多个同类对象的问题" class="headerlink" title="多个同类对象的问题"></a>多个同类对象的问题</h2><p>由图1可以看到，在这种未经过任何处理的存储结果下，a,b,c三个学生的属性在内存中确实可以完整的存储和访问，但是稍加思考就能觉得好像哪里不太对，是的，有一些属性实在每个学生里都出现的，比如图中可以看到的<code>run(),study(),gotoschool()</code>以及图中没有画出的<code>toString(),valueOf()</code>方法，这么多同样的属性，实际上是没有任何区别的，那位什么要在每一块内存里都存一遍呢？现在只是三个对象，如果会新建成百上千个这类对象呢，空间浪费岂不大发了？这里为了践行不浪费一粒空间的宗旨，前辈们想到了<strong>共享属性</strong>,如何让这些没有任何区别的属性内在不同对象之间共享，那就好了！于是就有了以下的图2：</p>
<p><div align="center"><img src="http://p4a8bakov.bkt.clouddn.com/objectproto.png"></div></p>
<p><div align="center">图2</div><br>可以看到，在这种结构中，a,b,c三个对象中的属性值相同的几个属性均消失了，代替的是多了一个名为<code>__proto__</code>的属性,图中可以看出，<code>__proto__</code>是一个对象，这个对象所包含的属性正是学生类对象的共享属性，通过把这几个共享的属性放到同一块内存中构成一个对象p，并且通过新增<code>__proto__</code>属性的方式，使得对象可以引用到这个对象p,就实现了<em>通过引用同样的<strong>prop</strong>属性来共享属性对象</em></p>
<h2 id="访问共享属性的钩子——proto"><a href="#访问共享属性的钩子——proto" class="headerlink" title="访问共享属性的钩子——proto"></a>访问共享属性的钩子——<strong>proto</strong></h2><p>前面已经提到了，通过<strong>proto</strong>对象中可以访问到同类对象的共享属性，比如对象a中并没有直接包含run()方法，但是a.<strong>proto</strong>中包含run()方法，这样当用到a.run()时，js引擎在a的直接属性中未找到该方法，则自动会去a.<strong>proto</strong>中寻找该方法属性，如果依然找不到该方法，则继续去下一层a.<strong>proto</strong>.<strong>proto</strong>寻找该方法，直到某一层的<strong>proto</strong>未undefined为止，利用这个特性，完全可以对一个对象做多层抽象到多个<strong>proto</strong>中，如上例中的学生类的共享属性中包含run(),study(),gotoschool()，toString(),valueOf()方法，完全可以把run(),toString(),valueOf()抽象成一个共享属性对象，为People类使用，因为这些方法属性都是人类的共有特性，进而再把toString(),valueOf()抽象成一个共享属性对象，为Object类使用，即所有的对象所共有的特性。</p>
<h3 id="proto属性是所有对象与生具来的属性"><a href="#proto属性是所有对象与生具来的属性" class="headerlink" title="proto属性是所有对象与生具来的属性"></a><strong>proto</strong>属性是所有对象与生具来的属性</h3><p>我们已经知道，通过<strong>proto</strong>属性可以访问到对象所属类的共享属性，那么这个属性到底来自哪里？总不能每次新建一个对象的时候都要我们手动为<strong>proto</strong>属性来赋值吧？不用担心，来看一下就好了~<br>创建对象的方式有两种，一种是直接用对象字面量来创建，一种是用构造函数法来创建，我们分别看一下这两种创建方式创建的对象的属性</p>
<p><div align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/2018/02/24__proto1.png"></div></p>
<p><div align="center">图3 字面量创建法</div></p>
<p><div align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/2018/02/24__proto2.png"></div></p>
<p><div align="center">图4 构造函数创建法</div><br>图三图四可以看出，无论是哪种方式创建的对象，都自带<strong>proto</strong>属性，也就是说一个对象相关的共享属性对象根本无需我们手动指定，它被JS引擎自动赋值给了这个对象的<strong>proto</strong>属性。</p>
<h2 id="共享属性对象的直接生产者——prototype"><a href="#共享属性对象的直接生产者——prototype" class="headerlink" title="共享属性对象的直接生产者——prototype"></a>共享属性对象的直接生产者——prototype</h2><p>目前为止，我们知道，通过一个对象的<strong>proto</strong>属性可以访问到它相关的共享属性对象，那么这个所谓的共享对象到底是什么呢？我们还不得而知。同样的，针对两种方式创建的对象的分别查看一下他们的<strong>proto</strong>属性的详细信息</p>
<p><div align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/2018/02/24__proto3.png"></div></p>
<p><div align="center">图5 <strong>proto</strong>详细信息——字面量创建法</div></p>
<p><div align="center"><img src="http://p4a8bakov.bkt.clouddn.com/image/2018/02/24__proto4.png"></div></p>
<p><div align="center">图6 <strong>proto</strong>详细信息——构造函数创建法</div><br>通过图5，图6的对比可以看出，两种创建方式的<strong>proto</strong>属性好像差距有点大，这是问什么呢？仔细看看，用对象字面量方式创建的对象中的该属性看上去似曾相识？可以在图5中看到，<strong>proto</strong>属性包含toString(),valueOf(),isPropertyOf(),hasOwnProperty()等一系列Object对象的原生方法，那么这里的<strong>proto</strong>属性何Object是不是有什么关系呢？所以~是时候来和Object.prototype属性作一下对比了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//对象字面量方式创建的对象</span><br><span class="line">var a=&#123;name:&apos;lily&apos;,age:17&#125;;</span><br><span class="line">typeof Object;//&quot;function&quot;</span><br><span class="line">console.log(a.__proto__===Object.prototype);//true</span><br><span class="line">//构造方式创建的对象</span><br><span class="line">var Test=function()&#123;&#125;;</span><br><span class="line">typeof Test;//&quot;function&quot;</span><br><span class="line">var b=new Test();</span><br><span class="line">console.log(a.__proto__===Object.prototype);//false</span><br><span class="line">console.log(a.__proto__===Test.prototype);//true</span><br></pre></td></tr></table></figure></p>
<p>首先，从对象字面量方式创建对象的执行的结果来看，对象的<strong>proto</strong>属性是等于Object的prototype属性的，但是在构造方式创建的对象中这个等式却是不成立的，是不是代表<strong>proto</strong>属性和prototype属性没什么必然关系了呢？NoNoNo!继续往下看 <code>console.log(a.__proto__===Test.prototype)</code>这个结果是<code>true</code>的，表示a对象的<strong>proto</strong>和Test的prototype属性建立了<code>等于</code>关系,那这又说明了什么呢？<br>很简单，通过递归可以得出 <code>o.__proto__===Func.prototype</code>这个恒等式，其中<code>o</code>表示任何方式创建的一个对象，<code>Func</code>表示创建这个对象的构造函数,现在是不是可以理解了，该例中b是通过构造函数Test创建的，所以b.<strong>proto</strong>===Test.prototype,而a是字面量对象，字面量对象实际上是JS引擎由Object构造的，所以当然了，a.__proto===Object.prototype</p>
<p>到现在，可以推出<strong>函数的<code>prototype</code>属性实际上才是真正存放共享属性对象的宿主</strong>，关于prototype属性有以下特点：</p>
<ul>
<li>JS引擎为<strong>所有函数</strong>默认生成了prototype属性</li>
<li>prototype属性的值是一个对象</li>
<li>默认的prototype属性对象都自带Constructor属性，且该属性的值是函数本身(注意重新为prototype赋值后Constructor可能不复存在)。</li>
</ul>
<h2 id="proto和prototype的不同意义"><a href="#proto和prototype的不同意义" class="headerlink" title="proto和prototype的不同意义"></a><strong>proto</strong>和prototype的不同意义</h2><p>我们知道，一般情况下，prototype是函数所特有的属性，而<strong>proto</strong>是所有对象都有的属性，但是函数也是对象，所以就有了：默认情况下，所有函数都同时存在<strong>proto</strong>和prototype属性，但是这两个属性的意义是不同的(<strong>proto</strong>表示了创建该函数的函数(一般是Function)提供的共享属性(即Function.prototype),而prototype则是为通过该函数本身创建的其它对象提供共享属性，通常这个属性会被人为覆盖或扩展)，所以一般有<code>函数.__proto__!==函数.prototype</code></p>
<h2 id="特殊的函数——Function"><a href="#特殊的函数——Function" class="headerlink" title="特殊的函数——Function"></a>特殊的函数——Function</h2><p>刚才说到，一般有<code>函数.__proto__!==函数.prototype</code>，但实际上有一个特殊情况，即Function对象本身，它也是一个函数，并且它是创建构造函数的函数，可以很容易的验证<br><code>Function.__proto__===Function.prototype</code>,这个特殊情况不妨这样理解：<br>Function是所有函数的构造函数，所以肯定存在<code>Function.prototype</code>，反过来因为所有函数的构造函数都是Function，所以Function作为函数也不例外，它也应该能理解为通过Function构造函数创建的，所以又Function.<strong>proto</strong>===Function.prototype</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>现在，可以对<strong>proto</strong>和prototype来个一句话总结了~——函数的prototype和 对象的<strong>proto</strong>属性共同配合，才有了对象的原型链机制，其中<strong>proto</strong>属性是我们层层递归的访问抽象类的共享属性的直接钩子(没有这个属性，JS引擎无法查找一个对象的上一层的共享属性)，而prototype则使得对象能够自动和共享属性对象绑定成为可能(无需我们手动为<strong>proto</strong>属性赋值，通过JS引擎自动将对象的属性<strong>proto</strong>  <em>和创建对象的构造函数的prototype相绑定</em>)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/19/CSS中元素的相对值/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hitobear">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小笨熊的旅途">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/19/CSS中元素的相对值/" itemprop="url">CSS中元素的相对值</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-19T16:54:40+08:00">
                2018-02-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>css中的单位有相对和绝对之分，如<code>em</code> <code>rem</code> 是相对单位,<code>px</code>是绝对单位,而相对又有不同的基准值之分，如<code>font-size</code>为百分比时，是相对于其父元素的<code>font-size</code>计算值，而<code>line-height</code>为小数时，是相对于本元素的<code>font-size</code>计算值的，一般说来，相比于绝对单位,使用相对单位能够更加灵活的控制元素的大小,能够以更少的代码达到自适应效果,同时使各元素或各属性之间的大小关系更加清晰,直观。</p>
<h2 id="使用绝对单位px来设置属性值"><a href="#使用绝对单位px来设置属性值" class="headerlink" title="使用绝对单位px来设置属性值"></a>使用绝对单位<code>px</code>来设置属性值</h2><p>先来看一个简单的只包含基本问候语的页面，页面效果如下:</p>
<p><div align="center"><img src="http://p4a8bakov.bkt.clouddn.com/px.png" width="300" height="300"></div><br>实际的代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">    *&#123;</span><br><span class="line">        margin:0;</span><br><span class="line">    &#125;</span><br><span class="line">    #wrapper&#123;</span><br><span class="line">        text-align:center;</span><br><span class="line">        font-size:16px;</span><br><span class="line">        line-height:24px;</span><br><span class="line">    &#125;</span><br><span class="line">    body&#123;</span><br><span class="line">        display:flex;</span><br><span class="line">        justify-content:center;</span><br><span class="line">        align-items:center;</span><br><span class="line">        height:100vh;</span><br><span class="line">        background:linear-gradient(rgba(177,206,90,0.5),rgba(177,206,90,1));</span><br><span class="line">    &#125;</span><br><span class="line">    h2&#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">        font-size:24px;</span><br><span class="line">        line-height:36px;</span><br><span class="line">        margin-bottom:40px;</span><br><span class="line">    &#125;</span><br><span class="line">    p.content&#123;</span><br><span class="line">        text-align:center;</span><br><span class="line">        width:200px;</span><br><span class="line">        margin-bottom:20px;</span><br><span class="line">        font-size:18px;</span><br><span class="line">        line-height:25px;</span><br><span class="line">    &#125;</span><br><span class="line">    button&#123;</span><br><span class="line">        padding: 6px 16px;</span><br><span class="line">        border: 1px solid #446d88;</span><br><span class="line">        background: #58a linear-gradient(#77a0bb, #58a);</span><br><span class="line">        border-radius: 4px;</span><br><span class="line">        box-shadow: 0 1px 5px gray;</span><br><span class="line">        color: white;</span><br><span class="line">        text-shadow: 0 -1px 1px #335166;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">        line-height: 30px;</span><br><span class="line">        display:inline-block;</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;wrapper&quot;&gt;&lt;h2&gt;CSS之旅&lt;/h2&gt;</span><br><span class="line">    &lt;p class=&quot;content&quot;&gt;欢迎来到CSS世界,我们一起成长吧~&lt;/p&gt;</span><br><span class="line">    &lt;button&gt;Welcome&lt;/button&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>可以看到，在这里的代码中，包括行高,字体大小，宽度，高度，内边距等等所有的长度单位都用的<code>px</code>,虽然看上去大小很直观，像素值一目了然，但是与此同时后期的维护体验是相当的差。。</p>
<h2 id="line-height-的相对值"><a href="#line-height-的相对值" class="headerlink" title="line-height 的相对值"></a>line-height 的相对值</h2><p>可以看到，上述的代码中，共有三个地方都出现了<code>line-height</code>属性的设置，包括外层的<code>div</code>,内层的<code>button</code>和<code>p</code>，而且经过稍微的运算可以得出<code>lineheight</code>的值是<code>font-size</code>值的<code>1.5</code>倍,那么如果因为某种原因，我需要将dev的<code>font-size</code>值由<code>16px</code>改为<code>12px</code>,为了确保行高相对于字体的大小和原来不变，需要重新计算出<code>12px</code>的<code>1.5</code>倍的值，其他的字体大小改变同样要经过这个计算，那么既然我们已经直到行高相对于字体大小的比例是固定的，有没有什么办法不用每次<code>font-size</code>值改变时，行高都需要手动重写计算呢？幸好，是有的~~</p>
<h3 id="line-height设为百分比"><a href="#line-height设为百分比" class="headerlink" title="line-height设为百分比"></a>line-height设为百分比</h3><p><code>line-height</code>值可以设置为百分比，此时它的计算值为<strong>元素本身</strong>的<code>font-size</code>值的百分比大小。<br>上一节的情况，由于想要让行高是字体大小的<code>1.5倍</code>，只要将行高属性设置为<code>line-height:150%</code>即可,这样，当元素的<code>font-size</code>值无论如何变化，<code>line-height</code>的值都无需更改，也能保持行高为元素字体的<code>1.5倍</code>(浏览器会自动计算)</p>
<h3 id="line-height设为小数"><a href="#line-height设为小数" class="headerlink" title="line-height设为小数"></a>line-height设为小数</h3><p>经过了上述改进，已经可以做到<code>font-size</code>改变时，无需改变<code>line-height</code>了，但现在还有一个问题，可以看到<code>p</code>元素和<code>buttong</code>元素的<code>line-height</code>值和<code>div</code>元素的<code>line-height</code>值是一样的,都是相对于各自元素的字体大小的<code>150%</code>即<code>1.5</code>倍，如果我们确定这几个元素中每个元素的行高和字体比是一样的，那么当这个比例由<code>1.5</code>改为<code>1.6</code>时，需要同时更改这三个元素的<code>line-height</code>属性从<code>150%</code>到<code>160%</code>,这个过程看上去也有些冗余，有没有其它办法呢？当然也是有的~<br>这三个元素有个特点，即<code>p</code>和<code>button</code>元素是<code>div</code>元素的子元素，这时候为了避免上述情况的冗余变更，可以将<code>line-height</code>属性值由<code>百分比形式变为小数形式</code> </p>
<p><strong><code>line-height</code>设为小数时，可以让继承其属性的子元素直接继承该小数点，而line-height设为百分比时，继承该属性的子元素继承的则是父元素计算好的实际像素值</strong>，这是<code>line-height</code>设置为小数点和百分比的本质区别。</p>
<p>举例来说，在本例中<code>p</code>时<code>div</code>元素的子元素，如果父元素<code>div</code>的行高设置为<code>150%</code>,不为<code>p</code>元素设置<code>line-height</code>属性的话，则<code>p</code>元素默认继承父元素的<code>line-height</code>计算值(即16px<em>150%=24px)，则无论<code>p</code>元素的<code>font-size</code>值为多大，行高都保持<code>24px</code>，显然时不合理的。这时，为了既能继承父元素的行高和元素字体大小比，又能与元素本身的字体大小相关，只需<strong>将父元素的行高设置为小数形式</strong>即可,给<code>div</code>设置<code>line-height:1.5</code>,这样<code>p</code>元素默认继承的是<code>line-height:1.5</code>,**它的计算值是自身的font-size值</em>1.5**</p>
<p>采取为父元素设置行高为小数点的形式，这样无需为子元素设置<code>line-height</code>,也会默认继承父元素的行高字体比，(因为<strong><code>line-height</code>属性默认就是继承的</strong>，<code>button</code>元素需要设置<code>line-height:inherit</code>，显示指定继承，否则会被浏览器添加的用户样式覆盖),这中方式既省去了设置多个元素的<code>line-height</code>属性值，又避免了行高字体比变化时的代码冗余变更问题，当比例变化为1.6时，只需显示改变父元素<code>div</code>的行高为<code>line-height：1.6</code>即可。</p>
<h2 id="font-size的相对值"><a href="#font-size的相对值" class="headerlink" title="font-size的相对值"></a>font-size的相对值</h2><p>示例代码中，父元素<code>div</code>的<code>font-size</code>值是<code>16px</code>,<code>button</code>元素的<code>font-size</code>值是<code>20px</code>,是其父元素的<code>125%</code>,同样地，如果想让buttong元素的字体大小固定为父元素字体大小的<code>1.25</code>倍的话，当父元素的字体值改变时，这时不得不重新计算<code>button</code>元素的大小并重新设置该属性值，为了避免这个问题，font-size也支持相对值，即<code>百分比格式的数值</code>,<strong>当<code>font-size</code>设置为百分比时,是相当于其父元素字体的百分比</strong></p>
<h2 id="em和rem"><a href="#em和rem" class="headerlink" title="em和rem"></a>em和rem</h2><p>除了某些元素可以设置为百分比外，还有两个相对长度单位，<code>em</code>和<code>rem</code>,<code>em</code>和<code>rem</code>都是灵活，可扩展的长度单位，直接相关于字体的默认大小或指定的大小值，可应用于元素的<code>padding</code>,<code>marign</code>,<code>border-width</code>,<code>line-height</code>等属性。</p>
<h3 id="em"><a href="#em" class="headerlink" title="em"></a>em</h3><p>当使用em单位时，实际像素值是em值乘以使用em单位的元素本身的字体大小，如一个元素的<code>font-size</code>值是<code>12px</code>,则当padding值设置为<code>0.2em</code>时，实际内边距的像素值是<code>12*0.2</code>即<code>2.4px</code>。<br>应用em，可以将该例中button相关的<code>padding</code>,<code>margin</code>值设置为相对于字体<code>font-size</code>的像素值的特定比例大小(边框的宽度无需用<code>em</code>表示，固定为<code>px</code>即可)</p>
<p>将本例中的<code>button</code>元素改良为<code>em</code>值后，相关属性设置如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">button&#123;</span><br><span class="line">        padding: .3em .8em;</span><br><span class="line">        border: 1px solid #446d88;</span><br><span class="line">        background: #58a linear-gradient(#77a0bb, #58a);</span><br><span class="line">        border-radius: .2em;</span><br><span class="line">        box-shadow: 0 .05em .25em gray;</span><br><span class="line">        color: white;</span><br><span class="line">        text-shadow: 0 -0.05em 0.05em #335166;</span><br><span class="line">        font-size: 125%;</span><br><span class="line">        line-height: inherit;</span><br><span class="line">        display:inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h3><p><code>rem</code>和<code>em</code>极其类似，当使用 <code>rem</code>时，实际的像素大小取决于页面根元素的字体大小，即 html 元素的字体大小，像素值等于根元素字体大小乘以 rem 值</p>
<p>综上，<code>rem</code>和<code>em</code>使得内外边距，边框等属性都能够相对于字体大小进行设置(等同于可以设置相对字体大小的百分比，用小数点+em单位来表示)，不同之处在于，<code>em</code>是相对于元素本身的字体大小进行设置，而<code>rem</code>是相对于页面根元素(<code>html</code>)的字体大小进行设置的，要想区分要用<code>em</code>还是<code>rem</code>单位，只需确定该属性是和元素本身的字体大小相关联还是和<code>html</code>元素的字体大小相关联</p>
<p>综上，CSS中应用相对值时，最重要的还是分析清楚属性之间的相关性。<br><a href="https://github.com/hitobear/cssgarden/blob/master/realative/index.html" target="_blank" rel="noopener">代码请戳</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/15/yinyang/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hitobear">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小笨熊的旅途">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/15/yinyang/" itemprop="url">copy一个精致的单个div实现的阴阳图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-15T10:27:32+08:00">
                2018-02-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="css画阴阳图"><a href="#css画阴阳图" class="headerlink" title="css画阴阳图"></a>css画阴阳图</h3><p>学着<a href="https://css-tricks.com/examples/ShapesOfCSS/" target="_blank" rel="noopener">CSS-tricks</a>的阴阳效果，自己也画了一个作为练习，虽然实现方式是copy的原效果的，哈哈，最起码能理解整个效果了，而且能自己背着copy下来了(( ╯□╰ )),还是很开心的，这里对整个实现的过程做一个小总结</p>
<h3 id="目标效果"><a href="#目标效果" class="headerlink" title="目标效果"></a>目标效果</h3><p>最终呈现效果是黑白阴阳图，最外层大圆所占空间宽度是100px,第二层的两个凸起圆所占宽度为48px,最内层的小圆直径是12px.</p>
<h3 id="实现阴阳图"><a href="#实现阴阳图" class="headerlink" title="实现阴阳图"></a>实现阴阳图</h3><blockquote>
<p>画一个下黑上白的div框  </p>
</blockquote>
<p>从最终效果里可以看到，这应该是由一个正方形的div框演变而来的，这个div框的下边一半是黑色的，上边一般是白色的,那么如何实现呢？脑海里可能会闪过几种不同的实现方式，比如通过两个div合成，上div背景白色，下div北京黑色，再比如只用一个div的话，考虑填充色中上一半白色，下一半黑色，用颜色渐变来实现就好了，其实好像还有更简单的办法，考虑到最终效果知识下边一半是黑色而已，并没有说下边的黑色一定是内容区啊，所以这里完全可以用更加通俗易懂的边框来实现，把整个下半部分都当做边框就可以了，所以这块儿就通过<strong>纯border的设置来实现这个效果</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">#yinyang&#123;</span><br><span class="line">      border-color:black;</span><br><span class="line">      border-width:2px 2px 50px 2px;</span><br><span class="line">      height:48px;</span><br><span class="line">      width:96px;</span><br><span class="line">      border-style:solid;</span><br><span class="line">      position:relative;</span><br><span class="line">      background:white;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div id=&quot;yinyang&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>完成最外层大圆效果</p>
</blockquote>
<p>由正方形变成圆形，毫不犹豫，只要设置<code>border-radius</code>属性就可以了，这里我们为<code>div#yinyang</code>添加属性设置<code>border-radius:50%</code>即可(<strong>这里设置为大于50%也可以,浏览器会自动显示为各个border的圆角交接为止,不会互相超出</strong>)</p>
<blockquote>
<p>添加中层圆效果</p>
</blockquote>
<p>第二层分别左右两侧各有一个中圆，设置它们的宽度为48px(去除了外层圆的2px的边框),同样是圆形，这里当然可以考虑左右各添加一个绝对定位的div来实现，但想到<code>before,after</code>这两个伪元素(<em>**</em>)，他们不正可以用来为div添加内容吗？所以这里完全可以利用他们，节省两个div~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#yinyang::before&#123;</span><br><span class="line">     content:&apos;&apos;;</span><br><span class="line">     width:48px;</span><br><span class="line">     height:48px;</span><br><span class="line">     background:black;</span><br><span class="line">     position:absolute;</span><br><span class="line">     border-radius:100%;</span><br><span class="line">     top:50%;</span><br><span class="line">     left:0;</span><br><span class="line">   &#125;</span><br><span class="line">    #yinyang::after&#123;</span><br><span class="line">     content:&apos;&apos;;</span><br><span class="line">     width:48px;</span><br><span class="line">     height:48px;</span><br><span class="line">     background:white;</span><br><span class="line">     position:absolute;</span><br><span class="line">     border-radius:100%;</span><br><span class="line">     top:50%;</span><br><span class="line">     right:0;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>这里有一点需要注意下，刚添加玩before,after伪元素后，我没有看到任何效果，尝试了好几次才发现原来少了一个<code>content</code>属性，这里就是常常被我忽略的：<strong>before after伪元素一定要加上content属性，它的一系列属性效果才会生效，即使设置了边框，哪怕这个content的内容是空字符串也可以</strong></p>
<blockquote>
<p>实现小圆效果</p>
</blockquote>
<p>最后还差最内层的小圆了，最开始想到的是像上一层一样，再添加个before，after伪元素来实现小圆，但由于上一层已经用了这两个伪元素了，而before里再嵌套before是无效的，所以这种方式行不通了。。那么再换一种方式思考，不就是中圆里嵌套一个小圆吗，为什么要分别画两个圆呢？完全可以把内层的圆和外层的圆环当作同一个圆的两部分啊，内层的圆作为圆的内容，外层的圆环是圆的边框就可以了，通过设置一个圆的背景色和边框色就可以实现了~所以现在来改一下上一步的对伪元素的属性设置，为其添加边框，设置边框和宽度的比例等等<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#yinyang::before&#123;</span><br><span class="line">      content:&apos;&apos;;</span><br><span class="line">      width:12px;</span><br><span class="line">      height:12px;</span><br><span class="line">      border:18px solid black;</span><br><span class="line">      background:white;</span><br><span class="line">      position:absolute;</span><br><span class="line">      border-radius:100%;</span><br><span class="line">      top:50%;</span><br><span class="line">      left:0;</span><br><span class="line">    &#125;</span><br><span class="line">     #yinyang::after&#123;</span><br><span class="line">      content:&apos;&apos;;</span><br><span class="line">      width:12px;</span><br><span class="line">      height:12px;</span><br><span class="line">      border:18px solid white;</span><br><span class="line">      background:black;</span><br><span class="line">      position:absolute;</span><br><span class="line">      border-radius:100%;</span><br><span class="line">      top:50%;</span><br><span class="line">      right:0;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="自动旋转的阴阳图"><a href="#自动旋转的阴阳图" class="headerlink" title="自动旋转的阴阳图"></a>自动旋转的阴阳图</h3><p>目前为止，一个完整的阴阳图已经可以显示了~那现在可以考虑为它添加一点简单的动画，比如让它自己不停的匀速旋转，这里利用了<code>css3</code>的<code>animation</code>和<code>transform</code>属性，相关代码如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> @keyframes spin &#123;</span><br><span class="line">       0% &#123;</span><br><span class="line">        transform: rotate(0deg);</span><br><span class="line">        &#125;</span><br><span class="line">      100% &#123;</span><br><span class="line">        transform: rotate(360deg);</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"> #yinyang&#123;</span><br><span class="line">      ...</span><br><span class="line">      animation: spin 1.4s infinite linear; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>到这里效果就完成了，<a href="http://jsbin.com/jaliwex/edit?html,output" target="_blank" rel="noopener">这里</a>可以预览完整效果和查看代码,最后再总结一下阴阳图效果实现中的tips</p>
<blockquote>
<p>Tips</p>
<ol>
<li>可以考虑设置不同的<code>border</code>宽度来取代某些简单情况的渐变实现</li>
<li>考虑用<code>before</code> <code>after</code>伪元素代理空的div子元素设置效果(注意设置’content’)</li>
<li>考虑用内容和边框分离表现来代替div的嵌套</li>
</ol>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/10/搭建我的hexo博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hitobear">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小笨熊的旅途">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/10/搭建我的hexo博客/" itemprop="url">搭建我的hexo博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-10T11:03:53+08:00">
                2018-02-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我的hexo博客终于搭建完成了，虽然用基础工具都是前人的分享，各种高大上的hexo博客教程也有很多了，但这里还是想分享一下自己博客能够在浏览器中看到的喜悦，所以来做一下博客搭建的小总结(本文适用于windows下的搭建)~</p>
<h1 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h1><p>因为目标是基于github.io来实现博客的访问，当然离不开git仓库了，后续hexo的发布也会和github绑定，除此之外，关键的一点是，gitbash安装后不仅可以执行git相关命令，它相当于一个windows上的linux操作系统，可以执行大部分linux命令，所以这里首要的就是安装git了~<br>首先去<a href="https://git-scm.com/" target="_blank" rel="noopener">git官网</a>下载gitbash(只需右击git bash here即可进行命令行操作)</p>
<h1 id="安装node"><a href="#安装node" class="headerlink" title="安装node"></a>安装node</h1><p>之所以安装node有两个原因：</p>
<blockquote>
<ol>
<li>node是一个JS执行环境，之后可以基于node进行js相关的服务端开发</li>
<li>很多node相关的程序包都可以通过npm来进行管理，包括上传，下载，管理依赖，可以说npm是一个nodejs的程序仓库,有了npm，就可以获得很多已有的成熟的nodejs程序，所以我们需要npm，包括之后会用到的hexo也可以通过npm获得，而这里只要安装了node，就会同时自动安装npm，供我们以后使用</li>
</ol>
</blockquote>
<h2 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h2><blockquote>
<ol>
<li>从<a href="https://nodejs.org/en/" target="_blank" rel="noopener">官网</a>下载安装</li>
<li>执行 <code>node -v</code> <code>npm -v</code>命令，能正确的输出版本信息，说明安装成功 </li>
<li>右击打开git bash，依次执行如下命令，对npm进行配置<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org/</span><br><span class="line">npm config set loglevel http</span><br><span class="line">npm config set progress false</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<p>npm的配置文件是~/.npmrc,可以编辑该文件进行配置的变更</p>
<h1 id="hexo安装和使用"><a href="#hexo安装和使用" class="headerlink" title="hexo安装和使用"></a>hexo安装和使用</h1><blockquote>
<ol>
<li>右击进入 gitbash</li>
<li>安装hexo命令行工具 npm install -g hexo-cli</li>
<li>新建一个空目录，并进入该目录，在该目录下进行操作 <code>mkdir hexo &amp;&amp; cd ..</code></li>
<li>初始化本地的hexo目录，<code>hexo init myBlog</code></li>
<li><code>cd myBlog &amp;&amp; npm i</code> myBlog目录下的package.json进行依赖的安装</li>
<li><code>hexo new firstblog</code> 此时第一篇博客文档(<code>firstblog.md</code>)会在<code>source/_posts</code>目录下生成</li>
<li>start 文档路径,开始编辑博客内容</li>
<li>start _config.yml,编辑博客的配置<br><code>把第 6 行的 title 改成你想要的名字
把第 9 行的 author 改成你的大名
把最后一行的 type 改成 type: git
在最后一行后面新增一行，左边与 type 平齐，
加上一行 repo:  仓库地址 （仓库地址以 git@github.com: 开头）</code></li>
<li>这里说到hexo的发布要和github的仓库关联，所以要配置repo为github的仓库地址,如果还没有gigpage仓库，请参考下一节 gitPage仓库的配置。</li>
<li><code>npm install hexo-deployer-git --save</code>，安装 git 部署插件,使得自动部署到github仓库</li>
<li><code>hexo deploy</code> 发布当前的md博客</li>
<li>进入<code>username.github.io</code>仓库，可以看到当前仓库有了新的commit，多了很多文件，就是hexo自动push的</li>
<li>浏览器输入username.github.io可以预览生成的博客首页了</li>
</ol>
</blockquote>
<h1 id="博客更新"><a href="#博客更新" class="headerlink" title="博客更新"></a>博客更新</h1><blockquote>
<ol>
<li>在本地的博客目录下编辑内容(可以通过<code>hexo new</code>或直接编辑新建)</li>
<li>执行 <code>hexo generate</code><br>执行 <code>hexo deploy</code>即可刷新你的gitpage页面了</li>
</ol>
</blockquote>
<h1 id="博客主题的变更"><a href="#博客主题的变更" class="headerlink" title="博客主题的变更"></a>博客主题的变更</h1><p>有很多开源的博客主题,这里有一些<a href="https://www.zhihu.com/question/24422335" target="_blank" rel="noopener">主题推荐</a>，可找到合适自己的主题应用到自己的博客上，省时省力又漂亮(感兴趣的话以后有能力可以制作自己的博客主题分享给大家哈哈)，我这里选择了<code>iissnan/hexo-theme-next</code>这个主题，所以以它为例进行下配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd themes</span><br><span class="line">git clone git@github.com:iissnan/hexo-theme-next.git</span><br><span class="line">cd ..</span><br><span class="line">将 _config.yml 的第 75 行改为 theme: hexo-theme-next</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure></p>
<h1 id="博客源码的保存"><a href="#博客源码的保存" class="headerlink" title="博客源码的保存"></a>博客源码的保存</h1><p>进入你的gitpage仓库会发现，仓库上的代码好像都不是我认识的，我写的markdown文件怎么不见了呢？确实这些代码都是由hexo生成后的博客代码，可以说是经过了hexo的编译转化的，我当然不认识了:&gt;，那怎么样把我的博客源码推上仓库呢？也简单，新建一个github仓库就可以了，如新建<code>blog-generator</code>,把本地的hexo博客所在目录和<code>blog-generator</code>绑定就可以了，具体步骤如下:</p>
<blockquote>
<ol>
<li>在 GitHub 创建 blog-generator <code>空仓库</code></li>
<li>在本地的hexo博客代码根目录如myBlog下执行如下命令<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;hello&quot; &gt; README.md</span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git add origin git@github.com:hitobear/blog-generator.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<p>执行完这几个命令后，博客的源码，就会出现在<code>blog-generator</code>仓库了，以后每次变更博客内容后，在执行<code>hexo generator &amp;&amp; hexo deploy</code>命令之后，再执行 <code>git add ,git commit,git push</code>即可将最新的博客内容包括原始的markdown文件提交到<code>blog-generator</code>仓库了~</p>
<h1 id="gitPage仓库的配置"><a href="#gitPage仓库的配置" class="headerlink" title="gitPage仓库的配置"></a>gitPage仓库的配置</h1><blockquote>
<ol>
<li>首先由一个github账号</li>
<li>新建一个名为 username.github.io的仓库，该仓库默认是开启gitPage功能的，如果仓库名称是其他，则需要另行配置以开启gitPage功能。</li>
<li>只有本地git配置了以后，才可以将本地仓库push到远端的github仓库，所以还需要打开gitbash执行以下步骤进行git配置(已经绑定过github并能正常push代码的可以跳过4-8步)</li>
<li>生成本地的sshkey, <code>ssh-keygen -t rsa -b 4096 -C 邮箱名称</code>,此时命令行会和你交互，这期间连按三次回车即可</li>
<li>执行完4之后查看<code>~/.ssh/</code>目录下会有<code>id_rsa.push</code>文件,复制该文件的全部内容</li>
<li>进入 <a href="https://github.com/settings/keys" target="_blank" rel="noopener">github配置页面</a>，单机New SSH Key，需要输入Title和Key，Title可以随意填写一个标识名称，此时的Key则是刚刚第5步复制的内容，直接粘贴即可，点击 Add SSH key</li>
<li>回到gitBash,输入<code>ssh -T git@github.com</code>命令，与控制台的交互过程中输入yes即可完成和github的绑定配置</li>
<li>接下来，依次执行以下几个命令进行git本地仓库的配置<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name 你的英文名</span><br><span class="line">git config --global user.email 你的邮箱</span><br><span class="line">git config --global push.default matching</span><br><span class="line">git config --global core.quotepath false</span><br><span class="line">git config --global core.editor &quot;vim&quot;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Hitobear</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hitobear</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
